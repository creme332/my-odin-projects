(()=>{"use strict";var e={434:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(537),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([e.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\nbutton{\n\toutline:0;\n\tborder:0;\n}","",{version:3,sources:["webpack://./src/styles/reset.css"],names:[],mappings:"AAAA;;;CAGC;AACD;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB;;AAEA;CACC,SAAS;CACT,QAAQ;AACT",sourcesContent:["/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\nbutton{\n\toutline:0;\n\tborder:0;\n}"],sourceRoot:""}]);const l=a},772:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(537),o=n.n(r),i=n(645),a=n.n(i),l=n(667),s=n.n(l),c=new URL(n(79),n.b),A=a()(o()),d=s()(c);A.push([e.id,"@font-face {\n  font-family: bebas;\n  src: url("+d+");\n  font-weight: bold;\n}\n\n:root {\n  --table-outline-color: #e4e4ff;\n  --cell-size: 30px;\n  --bg-color: #f7f7ff;\n  --ship-cell-color: #545e75;\n  --playBtn-color: #f2d0a4;\n  --good-hit-color: #3f826d;\n  --bad-hit-color: #c03221;\n}\n\nbody {\n  font-family: bebas, sans-serif;\n  display: grid;\n  gap: 5em;\n  height: 100vh;\n  width: 100vw;\n  place-content: center;\n  background-color: var(--bg-color);\n}\n\nh1 {\n  text-align: center;\n  font-size: 100px;\n  color: var(--ship-cell-color);\n}\n#battlefields {\n  display: flex;\n  gap: 10em;\n}\n\n.board {\n  border-collapse: separate;\n  border-spacing: 1px;\n  position: relative;\n}\n\ntd {\n  outline: 2px solid var(--table-outline-color);\n  text-align: center;\n  height: var(--cell-size);\n  width: var(--cell-size);\n  position: relative;\n}\n\ntd.missed-hit {\n  background-color: var(--bad-hit-color);\n}\n\ntd.good-hit .ship-cell {\n  background-color: var(--good-hit-color);\n}\n\n#playButton {\n  font-family: bebas;\n  font-size: 50px;\n  border-radius: 10px;\n  background-color: var(--ship-cell-color);\n  color: var(--bg-color);\n}\n\n#playButton:hover,\n#playButton.started {\n  background-color: var(--good-hit-color);\n}\n\n.ship-cell {\n  height: 100%;\n  background-color: var(--ship-cell-color);\n}\n\n#myBoard .ship-cell {\n  cursor: move;\n}\n\n.ship-cell.hidden {\n  background-color: transparent;\n}\n\n.ship-cell.dragging {\n  opacity: 0.5;\n}\n\n.ghost-cell {\n  /* background-color: rgb(216, 216, 216); */\n  outline: 3px dotted;\n}\n@media screen and (max-width: 800px) {\n  body {\n    padding-top: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 5em;\n    height: auto;\n    width: 100vw;\n  }\n  h1 {\n    text-align: center;\n    font-size: 80px;\n  }\n  #battlefields {\n    /* outline: 5px solid; */\n    flex-direction: column;\n  }\n  #playButton {\n    width: 200px;\n  }\n}\n\n/* Source of hover effect : https://codepen.io/t_afif/pen/poawLeQ */\n.hover-2 {\n  --c: var(--good-hit-color); /* the color */\n  --b: 0.1em; /* border length*/\n  --d: 20px; /* the cube depth */\n\n  --_s: calc(var(--d) + var(--b));\n\n  color: var(--c);\n  border: solid #0000;\n  border-width: var(--b) var(--b) var(--_s) var(--_s);\n  background: conic-gradient(\n        at left var(--d) bottom var(--d),\n        #0000 90deg,\n        rgb(255 255 255 /0.3) 0 225deg,\n        rgb(255 255 255 /0.6) 0\n      )\n      border-box,\n    conic-gradient(at left var(--_s) bottom var(--_s), #0000 90deg, var(--c) 0)\n      0 100% / calc(100% - var(--b)) calc(100% - var(--b)) border-box;\n  transform: translate(calc(var(--d) / -1), var(--d));\n  clip-path: polygon(\n    var(--d) 0%,\n    var(--d) 0%,\n    100% 0%,\n    100% calc(100% - var(--d)),\n    100% calc(100% - var(--d)),\n    var(--d) calc(100% - var(--d))\n  );\n  transition: 0.5s;\n}\n.hover-2:hover {\n  transform: translate(0, 0);\n  clip-path: polygon(\n    0% var(--d),\n    var(--d) 0%,\n    100% 0%,\n    100% calc(100% - var(--d)),\n    calc(100% - var(--d)) 100%,\n    0% 100%\n  );\n}\n\nh3 {\n  font-family: system-ui, sans-serif;\n  font-size: 4rem;\n  margin: 0 auto;\n  cursor: pointer;\n  padding: 0 0.1em;\n}\n","",{version:3,sources:["webpack://./src/styles/styles.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,4CAA2B;EAC3B,iBAAiB;AACnB;;AAEA;EACE,8BAA8B;EAC9B,iBAAiB;EACjB,mBAAmB;EACnB,0BAA0B;EAC1B,wBAAwB;EACxB,yBAAyB;EACzB,wBAAwB;AAC1B;;AAEA;EACE,8BAA8B;EAC9B,aAAa;EACb,QAAQ;EACR,aAAa;EACb,YAAY;EACZ,qBAAqB;EACrB,iCAAiC;AACnC;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,6BAA6B;AAC/B;AACA;EACE,aAAa;EACb,SAAS;AACX;;AAEA;EACE,yBAAyB;EACzB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,6CAA6C;EAC7C,kBAAkB;EAClB,wBAAwB;EACxB,uBAAuB;EACvB,kBAAkB;AACpB;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,mBAAmB;EACnB,wCAAwC;EACxC,sBAAsB;AACxB;;AAEA;;EAEE,uCAAuC;AACzC;;AAEA;EACE,YAAY;EACZ,wCAAwC;AAC1C;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,0CAA0C;EAC1C,mBAAmB;AACrB;AACA;EACE;IACE,iBAAiB;IACjB,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,QAAQ;IACR,YAAY;IACZ,YAAY;EACd;EACA;IACE,kBAAkB;IAClB,eAAe;EACjB;EACA;IACE,wBAAwB;IACxB,sBAAsB;EACxB;EACA;IACE,YAAY;EACd;AACF;;AAEA,mEAAmE;AACnE;EACE,0BAA0B,EAAE,cAAc;EAC1C,UAAU,EAAE,iBAAiB;EAC7B,SAAS,EAAE,mBAAmB;;EAE9B,+BAA+B;;EAE/B,eAAe;EACf,mBAAmB;EACnB,mDAAmD;EACnD;;;;;;;;qEAQmE;EACnE,mDAAmD;EACnD;;;;;;;GAOC;EACD,gBAAgB;AAClB;AACA;EACE,0BAA0B;EAC1B;;;;;;;GAOC;AACH;;AAEA;EACE,kCAAkC;EAClC,eAAe;EACf,cAAc;EACd,eAAe;EACf,gBAAgB;AAClB",sourcesContent:['@font-face {\n  font-family: bebas;\n  src: url("./bebasneue.ttf");\n  font-weight: bold;\n}\n\n:root {\n  --table-outline-color: #e4e4ff;\n  --cell-size: 30px;\n  --bg-color: #f7f7ff;\n  --ship-cell-color: #545e75;\n  --playBtn-color: #f2d0a4;\n  --good-hit-color: #3f826d;\n  --bad-hit-color: #c03221;\n}\n\nbody {\n  font-family: bebas, sans-serif;\n  display: grid;\n  gap: 5em;\n  height: 100vh;\n  width: 100vw;\n  place-content: center;\n  background-color: var(--bg-color);\n}\n\nh1 {\n  text-align: center;\n  font-size: 100px;\n  color: var(--ship-cell-color);\n}\n#battlefields {\n  display: flex;\n  gap: 10em;\n}\n\n.board {\n  border-collapse: separate;\n  border-spacing: 1px;\n  position: relative;\n}\n\ntd {\n  outline: 2px solid var(--table-outline-color);\n  text-align: center;\n  height: var(--cell-size);\n  width: var(--cell-size);\n  position: relative;\n}\n\ntd.missed-hit {\n  background-color: var(--bad-hit-color);\n}\n\ntd.good-hit .ship-cell {\n  background-color: var(--good-hit-color);\n}\n\n#playButton {\n  font-family: bebas;\n  font-size: 50px;\n  border-radius: 10px;\n  background-color: var(--ship-cell-color);\n  color: var(--bg-color);\n}\n\n#playButton:hover,\n#playButton.started {\n  background-color: var(--good-hit-color);\n}\n\n.ship-cell {\n  height: 100%;\n  background-color: var(--ship-cell-color);\n}\n\n#myBoard .ship-cell {\n  cursor: move;\n}\n\n.ship-cell.hidden {\n  background-color: transparent;\n}\n\n.ship-cell.dragging {\n  opacity: 0.5;\n}\n\n.ghost-cell {\n  /* background-color: rgb(216, 216, 216); */\n  outline: 3px dotted;\n}\n@media screen and (max-width: 800px) {\n  body {\n    padding-top: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 5em;\n    height: auto;\n    width: 100vw;\n  }\n  h1 {\n    text-align: center;\n    font-size: 80px;\n  }\n  #battlefields {\n    /* outline: 5px solid; */\n    flex-direction: column;\n  }\n  #playButton {\n    width: 200px;\n  }\n}\n\n/* Source of hover effect : https://codepen.io/t_afif/pen/poawLeQ */\n.hover-2 {\n  --c: var(--good-hit-color); /* the color */\n  --b: 0.1em; /* border length*/\n  --d: 20px; /* the cube depth */\n\n  --_s: calc(var(--d) + var(--b));\n\n  color: var(--c);\n  border: solid #0000;\n  border-width: var(--b) var(--b) var(--_s) var(--_s);\n  background: conic-gradient(\n        at left var(--d) bottom var(--d),\n        #0000 90deg,\n        rgb(255 255 255 /0.3) 0 225deg,\n        rgb(255 255 255 /0.6) 0\n      )\n      border-box,\n    conic-gradient(at left var(--_s) bottom var(--_s), #0000 90deg, var(--c) 0)\n      0 100% / calc(100% - var(--b)) calc(100% - var(--b)) border-box;\n  transform: translate(calc(var(--d) / -1), var(--d));\n  clip-path: polygon(\n    var(--d) 0%,\n    var(--d) 0%,\n    100% 0%,\n    100% calc(100% - var(--d)),\n    100% calc(100% - var(--d)),\n    var(--d) calc(100% - var(--d))\n  );\n  transition: 0.5s;\n}\n.hover-2:hover {\n  transform: translate(0, 0);\n  clip-path: polygon(\n    0% var(--d),\n    var(--d) 0%,\n    100% 0%,\n    100% calc(100% - var(--d)),\n    calc(100% - var(--d)) 100%,\n    0% 100%\n  );\n}\n\nh3 {\n  font-family: system-ui, sans-serif;\n  font-size: 4rem;\n  margin: 0 auto;\n  cursor: pointer;\n  padding: 0 0.1em;\n}\n'],sourceRoot:""}]);const u=A},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(a[s]=!0)}for(var c=0;c<e.length;c++){var A=[].concat(e[c]);r&&a[A[0]]||(void 0!==i&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=i),n&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=n):A[2]=n),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),t.push(A))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([i]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],l=0;l<e.length;l++){var s=e[l],c=r.base?s[0]+r.base:s[0],A=i[c]||0,d="".concat(c," ").concat(A);i[c]=A+1;var u=n(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=o(h,r);r.byIndex=l,t.splice(l,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var l=n(i[a]);t[l].references--}for(var s=r(e,o),c=0;c<i.length;c++){var A=n(i[c]);0===t[A].references&&(t[A].updater(),t.splice(A,1))}i=s}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},79:(e,t,n)=>{e.exports=n.p+"fonts/12e3683f9192436a7be8.ttf"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),o=n.n(r),i=n(569),a=n.n(i),l=n(565),s=n.n(l),c=n(216),A=n.n(c),d=n(589),u=n.n(d),h=n(434),f={};f.styleTagTransform=u(),f.setAttributes=s(),f.insert=a().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=A();t()(h.Z,f);h.Z&&h.Z.locals&&h.Z.locals;var p=n(772),E={};E.styleTagTransform=u(),E.setAttributes=s(),E.insert=a().bind(null,"head"),E.domAPI=o(),E.insertStyleElement=A();t()(p.Z,E);p.Z&&p.Z.locals&&p.Z.locals;n(79);function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(g(this,"_board",void 0),g(this,"_shipArray",void 0),g(this,"_index",void 0),this._board=[...Array(C.BOARD_SIZE)].map((()=>Array(C.BOARD_SIZE).fill(C.EMPTY_CELL))),e!==C.MY_BOARD_INDEX&&e!==C.RIVAL_BOARD_INDEX)throw new Error(`Invalid board index ${e}`);this._index=e}get index(){return this._index}static get MY_BOARD_INDEX(){return 0}static get RIVAL_BOARD_INDEX(){return 1}static get EMPTY_CELL(){return 0}static get SHIP_CELL(){return 1}static get BOARD_SIZE(){return 10}get basicBoard(){return this._board}setCellValue(e,t){if(e<0||e>=C.BOARD_SIZE*C.BOARD_SIZE||t!==C.EMPTY_CELL&&t!==C.SHIP_CELL)throw new Error(`Cannot set cell value to ${t} at ${e}`);const n=parseInt(e/C.BOARD_SIZE,10),r=e%C.BOARD_SIZE;this._board[n][r]=t}getCellValue(e){if(e<0||e>=C.BOARD_SIZE*C.BOARD_SIZE)throw new Error(`Cannot get cell value at ${e}`);const t=parseInt(e/C.BOARD_SIZE,10),n=e%C.BOARD_SIZE;return this._board[t][n]}loadShips(e){const t=[...Array(C.BOARD_SIZE)].map((()=>Array(C.BOARD_SIZE).fill(C.EMPTY_CELL)));if(e.forEach((e=>{e.getCellPositions().forEach((e=>{t[parseInt(e/C.BOARD_SIZE,10)][e%C.BOARD_SIZE]=C.SHIP_CELL}))})),!C.validate(t))throw new Error("Invalid board configuration given by shipArray");this._board=t,this._shipArray=e}resetBoard(){this._board=[...Array(C.BOARD_SIZE)].map((()=>Array(C.BOARD_SIZE).fill(C.EMPTY_CELL))),this._shipArray=[]}getShipAt(e){if(this.getCellValue(e)!==C.SHIP_CELL)return null;for(let t=0;t<this._shipArray.length;t++)if(this._shipArray[t].getCellPositions().includes(e))return this._shipArray[t];throw new Error(`Unknown ship cell found on board at ${e}`,this._board)}moveShip(e,t){if(null===e)throw new Error("ShipObj cannot be null");if(e.headPos===t)return!1;const n=parseInt(t/C.BOARD_SIZE,10),r=t%C.BOARD_SIZE,o=e.headPos;if(e.headPos=t,!e.fitsBoard(e.isVertical))return e.headPos=o,!1;if(e.headPos=o,e.getCellPositions().forEach((e=>{this.setCellValue(e,C.EMPTY_CELL)})),e.isVertical){for(let t=n-1;t<=n+e.size;t++)if(!(t<0||t>=C.BOARD_SIZE))for(let n=r-1;n<=r+1;n++)if(!(n<0||n>=C.BOARD_SIZE)&&this._board[t][n]===C.SHIP_CELL)return e.getCellPositions().forEach((e=>{this.setCellValue(e,C.SHIP_CELL)})),!1}else for(let t=n-1;t<=n+1;t++)if(!(t<0||t>=C.BOARD_SIZE))for(let n=r-1;n<=r+e.size;n++)if(!(n<0||n>=C.BOARD_SIZE)&&this._board[t][n]===C.SHIP_CELL)return e.getCellPositions().forEach((e=>{this.setCellValue(e,C.SHIP_CELL)})),!1;return e.moveTo(t),e.getCellPositions().forEach((e=>{this.setCellValue(e,C.SHIP_CELL)})),!0}rotateShip(e){if(null===e)throw new Error("ShipObj cannot be null");if(1===e.size)return!1;const t=parseInt(e.headPos/C.BOARD_SIZE,10),n=e.headPos%C.BOARD_SIZE;if(e.isVertical){for(let r=n+2;r<=n+e.size;r++)for(let e=t-1;e<=t+1;e++)if(r>=0&&r<C.BOARD_SIZE&&e>=0&&e<C.BOARD_SIZE&&this._board[e][r]===C.SHIP_CELL)return!1}else for(let r=n-1;r<=n+1;r++)for(let n=t+2;n<=t+e.size;n++)if(r>=0&&r<C.BOARD_SIZE&&n>=0&&n<C.BOARD_SIZE&&this._board[n][r]===C.SHIP_CELL)return!1;return e.getCellPositions().forEach((e=>{this.setCellValue(e,C.EMPTY_CELL)})),e.rotate(),e.getCellPositions().forEach((e=>{this.setCellValue(e,C.SHIP_CELL)})),!0}static validate(e){function t(t,n){const r=[-1,0,1,0],o=[0,1,0,-1];for(let i=0;i<4;i++){const a=t+r[i],l=n+o[i];if(a>-1&&a<C.BOARD_SIZE&&l>-1&&l<C.BOARD_SIZE&&e[a][l]===C.SHIP_CELL)return!1}return!0}function n(t,n){const r=[-1,-1,1,1],o=[-1,1,-1,1];for(let i=0;i<4;i++){const a=t+r[i],l=n+o[i];if(a>-1&&a<C.BOARD_SIZE&&l>-1&&l<C.BOARD_SIZE&&1===e[a][l])return!0}return!1}let r=0,o=0,i=0,a=0,l=1,s=1;for(let c=0;c<C.BOARD_SIZE;c++){l=1,s=1;for(let A=0;A<C.BOARD_SIZE;A++){if(e[c][A]===C.SHIP_CELL){if(n(c,A))return!1;t(c,A)&&a++}A>0&&(e[c][A]===C.EMPTY_CELL?(4===l&&r++,3===l&&o++,2===l&&i++,l=1):e[c][A]===C.SHIP_CELL&&e[c][A-1]===C.SHIP_CELL&&l++,e[A][c]===C.EMPTY_CELL?(4===s&&r++,3===s&&o++,2===s&&i++,s=1):e[A][c]===C.SHIP_CELL&&e[A-1][c]===C.SHIP_CELL&&s++)}4===l&&r++,4===s&&r++,3===l&&o++,3===s&&o++,2===l&&i++,2===s&&i++}return 1===r&&2===o&&3===i&&4===a}getAllShipPositions(){const e=[];return this._shipArray.forEach((t=>{e.push(t.getCellPositions())})),e}}const B=C;function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=class{constructor(e){b(this,"_hit",void 0),b(this,"_position",void 0),this._position=e,this._hit=!1}get hit(){return this._hit}set hit(e){this._hit=e}set pos(e){this._position=e}get pos(){return this._position}};function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=class{constructor(e,t,n,r){if(m(this,"_vertical",void 0),m(this,"_size",void 0),m(this,"_headPos",void 0),m(this,"_boardIndex",void 0),m(this,"_life",void 0),m(this,"_cellsArray",[]),!(e>0&&e<5))throw new Error("Invalid ship size",e);if(!((0===n||1===n)&&r>=0&&r<B.BOARD_SIZE*B.BOARD_SIZE))throw new Error("Invalid ship coordinates",[n,r]);this._size=e,this._boardIndex=n,this._headPos=r,this._vertical=t,this._life=e,this.moveTo(r)}fitsBoard(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=parseInt(this.headPos/B.BOARD_SIZE,10),n=this.headPos%B.BOARD_SIZE;if(e){if(t+this._size-1>=B.BOARD_SIZE)return!1}else if(n+this._size-1>=B.BOARD_SIZE)return!1;return!0}get isVertical(){return this._vertical}get size(){return this._size}set headPos(e){if(!(e>=0&&e<B.BOARD_SIZE*B.BOARD_SIZE))throw new Error(`Cannot set headPos to ${e}`);this._headPos=e}get headPos(){return this._headPos}get boardIndex(){return this._boardIndex}get cellsArray(){return this._cellsArray}moveTo(e){if(this._headPos=e,this._cellsArray=[],!this.fitsBoard(this._vertical))throw new Error(`Ship cannot be moved to #${e} (Insufficient space)`);for(let t=0;t<this._size;t++){const n=e+(this._vertical?B.BOARD_SIZE*t:t),r=new v(n);this._cellsArray.push(r)}}rotatable(){return this.fitsBoard(!this._vertical)}rotate(){if(this.rotatable()){for(let e=0;e<this._size;e++){const t=this._cellsArray[e];this._vertical?t.pos=this._headPos+e:t.pos=this._headPos+e*B.BOARD_SIZE}this._vertical=!this._vertical}}attack(e){this._cellsArray.forEach((t=>{t.pos===e&&(t.hit=!0,this._life=Math.max(this._life-1,0))}))}sunk(){return 0===this._life}getCellPositions(){return this._cellsArray.map((e=>e.pos))}},S=(()=>{let e=!1,t=!0;const n=new B(B.MY_BOARD_INDEX),r=new B(B.RIVAL_BOARD_INDEX),o=[],i=[];function a(){return t}function l(e){if(e<0||e>=B.BOARD_SIZE*B.BOARD_SIZE)throw new Error(`Cannot attack invalid coordinates ${e}`);if(t){if(o.includes(e))return!1;o.push(e)}else{if(i.includes(e))return!1;i.push(e)}return!0}function s(e){function t(e){if(e<0||e>=B.BOARD_SIZE*B.BOARD_SIZE)throw new Error(`Invalid cell position: ${e}`);const t=[],n=parseInt(e/B.BOARD_SIZE,10),r=e%B.BOARD_SIZE,o=[[-1,-1,-1,0,1,1,1,0],[-1,0,1,1,1,0,-1,-1]];for(let e=0;e<o[0].length;e++){const i=n+o[0][e],a=r+o[1][e];i>=0&&a>=0&&i<B.BOARD_SIZE&&a<B.BOARD_SIZE&&t.push(i*B.BOARD_SIZE+a)}return t}let n=Array.from(Array(B.BOARD_SIZE*B.BOARD_SIZE).keys()),r=[];const o=[];return[4,3,3,2,2,2,1,1,1,1].forEach((i=>{const a=function(e,n,r,o){let i,a=!1;const l=r.length;for(;!a;){const s=Math.random()<.5,c=r[Math.floor(Math.random()*l)];try{i=new _(e,s,n,c);const l=!i.getCellPositions().some((e=>!r.includes(e))),A=!i.getCellPositions().some((e=>t(e).some((e=>o.includes(e)))));a=l&&A}catch(e){a=!1}}return i}(i,e,n,r);o.push(a),r=[...r,...a.getCellPositions()],a.getCellPositions().forEach((e=>{const r=t(e);n=n.filter((t=>t!==e&&!r.includes(t)))}))})),o}return{getBasicBoard:function(e){return e===n.index?n.basicBoard:r.basicBoard},getAllShipPositions:function(e){return e===n.index?n.getAllShipPositions():r.getAllShipPositions()},getShipObj:function(e,t){return e===n.index?n.getShipAt(t):r.getShipAt(t)},rotateShip:function(e,t){return t===n.index?n.rotateShip(n.getShipAt(e)):r.rotateShip(r.getShipAt(e))},moveShip:function(e,t,o){return o===n.index?n.moveShip(n.getShipAt(e),t):r.moveShip(r.getShipAt(e),t)},startGame:function(){if(e)throw new Error("Cannot start an ongoing game twice");e=!0,t=!0,o.length=0,i.length=0},swapTurn:function(){if(!e)throw new Error("Cannot change turn when game has not started");t=!t},endGame:function(){if(!e)throw new Error("Cannot end a game twice");e=!1},attackBoard:l,checkWinner:function(){let e=!0,t=!0;for(let a=0;a<B.BOARD_SIZE*B.BOARD_SIZE;a++)r.getCellValue(a)!==B.SHIP_CELL||o.includes(a)||(e=!1),n.getCellValue(a)!==B.SHIP_CELL||i.includes(a)||(t=!1);return e||t},getTurn:a,gameStarted:function(){return e},initialiseBoards:function(){var e;n.resetBoard(),r.resetBoard(),n.loadShips((e=n.index,[new _(4,!0,e,0),new _(3,!0,e,3),new _(3,!1,e,5),new _(2,!1,e,38),new _(2,!0,e,60),new _(2,!0,e,84),new _(1,!1,e,99),new _(1,!0,e,19),new _(1,!0,e,90),new _(1,!1,e,59)])),r.loadShips(s(r.index))},isShip:function(e,t){return e===n.index?n.getCellValue(t)===B.SHIP_CELL:r.getCellValue(t)===B.SHIP_CELL},computerPlay:function(){if(a())throw new Error("Not computer's turn to play");let e=0;for(;!l(e);)e=parseInt(Math.random()*B.BOARD_SIZE*B.BOARD_SIZE,10);return e},getRandomFleet:s}})(),y=(()=>{const e=document.getElementById("battlefields");function t(e,t,n,r,o){const i=document.createElement(e);return t&&(i.id=t),n&&n.forEach((e=>i.classList.add(e))),r&&(i.textContent=r),o&&o.forEach((e=>i.appendChild(e))),i}function n(e){const n=t("table",e,["board"],null,null);for(let e=0;e<B.BOARD_SIZE;e++){const r=[];for(let n=0;n<B.BOARD_SIZE;n++){const o=e*B.BOARD_SIZE+n,i=t("td",null,null,null,null);i.setAttribute("data-index",o),r.push(i)}const o=t("tr",null,null,null,r);n.appendChild(o)}return n}function r(){return e.querySelector("#myBoard")}function o(){return e.querySelector("#rivalBoard")}function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?e.classList.add("missed-hit"):e.classList.add("good-hit")}function a(t,n){if(0!==t&&1!==t)throw Error(`Invalid board index: ${t}`);if(!(n>=0&&n<B.BOARD_SIZE*B.BOARD_SIZE))throw Error(`Invalid cell index: ${n}`);return[...e.querySelectorAll(".board")[t].querySelectorAll("td")][n]}function l(e,t){const n=a(e,t).querySelector(".ship-cell");if(null===n)throw new Error(`No ship cell at ${t}`);return n}function s(){return document.querySelector("#playButton")}return{initialiseBoards:function(){const t=n("myBoard"),r=n("rivalBoard");e.appendChild(t),e.appendChild(r)},changePlayButtonColour:function(){s().classList.add("started")},initialiseShips:function(e,n){for(let r=0;r<B.BOARD_SIZE;r++)for(let o=0;o<B.BOARD_SIZE;o++){const i=a(n,r*B.BOARD_SIZE+o);if(e[r][o]===B.SHIP_CELL){const e=t("div",null,0===n?["ship-cell"]:["ship-cell","hidden"],null,null);i.appendChild(e)}}},displayGuess:function(){const e=[...r().querySelectorAll("td")];e[0].classList.add("missed-hit"),e[3].classList.add("missed-hit"),e[10].classList.add("good-hit"),e[20].classList.add("good-hit"),e[30].classList.add("good-hit"),o().querySelectorAll("td").forEach((e=>{e.addEventListener("click",(e=>{i(e.target,!1);e.target.getAttribute("data-index")}))}))},listenGuess:function(){o().querySelectorAll("td").forEach((e=>{e.addEventListener("click",(e=>{i(e.target)}))}))},getBoardCellElement:a,getMyShipCells:function(){return r().querySelectorAll(".ship-cell")},getShipCellElement:l,moveShipCell:function(e,t,n){if(t===n)return;const r=l(e,t),o=a(e,n);o.appendChild(r)},getCellIndex:function(e){return parseInt(e.closest("td").getAttribute("data-index"),10)},toggleGhostShip:function(e,t,n,r){let o;try{o=new _(n,r,0,t)}catch(e){return}o.getCellPositions().forEach((t=>{e?a(0,t).classList.add("ghost-cell"):a(0,t).classList.remove("ghost-cell")}))},displayWinner:function(e){s().textContent=e?"You won!":"You lost"},displayTurn:function(e){s().textContent=e?"Your turn":"..."},getPlayButton:s,getAllBoardCellElements:function(e){return 0===e?r().querySelectorAll("td"):o().querySelectorAll("td")},changeCellColor:i}})();(()=>{S.initialiseBoards(),y.initialiseBoards(),y.initialiseShips(S.getBasicBoard(B.MY_BOARD_INDEX),B.MY_BOARD_INDEX),y.initialiseShips(S.getBasicBoard(B.RIVAL_BOARD_INDEX),B.RIVAL_BOARD_INDEX);const e=y.getMyShipCells();function t(e){if(S.gameStarted())return;const t=y.getCellIndex(e.target);S.getBasicBoard(B.MY_BOARD_INDEX);const n=S.getShipObj(B.MY_BOARD_INDEX,t),r=n.getCellPositions();if(S.rotateShip(t,B.MY_BOARD_INDEX)){S.getBasicBoard(B.MY_BOARD_INDEX);const e=n.getCellPositions();for(let t=0;t<e.length;t++)y.moveShipCell(B.MY_BOARD_INDEX,r[t],e[t])}}function n(){y.displayWinner(S.getTurn()),y.getAllBoardCellElements().forEach((e=>{e.removeEventListener("click",r)})),S.endGame()}function r(e){if(!S.getTurn())return;const t=y.getCellIndex(e.target),r=y.getBoardCellElement(B.RIVAL_BOARD_INDEX,t);S.attackBoard(t)&&(y.changeCellColor(r,!S.isShip(B.RIVAL_BOARD_INDEX,t)),S.checkWinner()?n():(S.swapTurn(),y.displayTurn(S.getTurn()),function(){if(S.getTurn())return;const e=S.computerPlay();y.changeCellColor(y.getBoardCellElement(B.MY_BOARD_INDEX,e),!S.isShip(B.MY_BOARD_INDEX,e)),S.checkWinner()?n():(S.swapTurn(),y.displayTurn(S.getTurn()))}()))}S.getBasicBoard(B.MY_BOARD_INDEX),e.forEach((e=>{e.addEventListener("dblclick",t)})),function(){let t=null,n=-1;e.forEach((e=>{e.addEventListener("dragstart",(()=>{if(S.gameStarted())return;const n=y.getCellIndex(e);t=S.getShipObj(B.MY_BOARD_INDEX,n),t.getCellPositions().forEach((e=>{y.getShipCellElement(B.MY_BOARD_INDEX,e).classList.add("dragging")}))}))})),e.forEach((e=>{e.addEventListener("dragend",(()=>{if(S.gameStarted())return;t.getCellPositions().forEach((e=>{y.getShipCellElement(B.MY_BOARD_INDEX,e).classList.remove("dragging")})),y.toggleGhostShip(!1,n,t.size,t.isVertical),S.getBasicBoard(B.MY_BOARD_INDEX);const e=t.getCellPositions();if(S.moveShip(t.headPos,n,B.MY_BOARD_INDEX)){S.getBasicBoard(0);const n=t.getCellPositions();for(let t=0;t<n.length;t++)y.moveShipCell(B.MY_BOARD_INDEX,e[t],n[t])}t=null}))}));for(let e=0;e<B.BOARD_SIZE*B.BOARD_SIZE;e++){y.getBoardCellElement(B.MY_BOARD_INDEX,e).addEventListener("dragover",(()=>{if(!S.gameStarted()){if(null===t)throw new Error("Dragged ship object cannot be null at this point");n>=0&&n!==e&&y.toggleGhostShip(!1,n,t.size,t.isVertical),y.toggleGhostShip(!0,e,t.size,t.isVertical),n=e}}))}}(),y.getPlayButton().addEventListener("click",(()=>{S.startGame(),y.displayTurn(S.getTurn()),y.changePlayButtonColour(),y.getAllBoardCellElements().forEach((e=>{e.addEventListener("click",r)}))}),{once:!0})})()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFBQSxZQUNBQyxFQUFBQSxZQUFpQkQsRUFBQUEsV0FDakJDLEVBQUFBLHlCQUVBQSxFQUFBQSwwQkFBK0I1SixTQUFTcUQsSUFDdENBLEVBQUtzRixpQkFBaUIsUUFBU3dCLEVBQVcsR0FDMUMsR0FFSixDQUFFTSxNQUFNLEdBRVgsRUE3T2tCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlcy9yZXNldC5jc3MiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zdHlsZXMvcmVzZXQuY3NzPzRjZmIiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcz9lNDViIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2NyaXB0cy9ib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NjcmlwdHMvc2hpcGNlbGwuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zY3JpcHRzL3NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zY3JpcHRzL21vZGVsLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2NyaXB0cy92aWV3LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2NyaXB0cy9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiLyogaHR0cDovL21leWVyd2ViLmNvbS9lcmljL3Rvb2xzL2Nzcy9yZXNldC8gXFxuICAgdjIuMCB8IDIwMTEwMTI2XFxuICAgTGljZW5zZTogbm9uZSAocHVibGljIGRvbWFpbilcXG4qL1xcbmh0bWwsIGJvZHksIGRpdiwgc3BhbiwgYXBwbGV0LCBvYmplY3QsIGlmcmFtZSxcXG5oMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwLCBibG9ja3F1b3RlLCBwcmUsXFxuYSwgYWJiciwgYWNyb255bSwgYWRkcmVzcywgYmlnLCBjaXRlLCBjb2RlLFxcbmRlbCwgZGZuLCBlbSwgaW1nLCBpbnMsIGtiZCwgcSwgcywgc2FtcCxcXG5zbWFsbCwgc3RyaWtlLCBzdHJvbmcsIHN1Yiwgc3VwLCB0dCwgdmFyLFxcbmIsIHUsIGksIGNlbnRlcixcXG5kbCwgZHQsIGRkLCBvbCwgdWwsIGxpLFxcbmZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLFxcbnRhYmxlLCBjYXB0aW9uLCB0Ym9keSwgdGZvb3QsIHRoZWFkLCB0ciwgdGgsIHRkLFxcbmFydGljbGUsIGFzaWRlLCBjYW52YXMsIGRldGFpbHMsIGVtYmVkLCBcXG5maWd1cmUsIGZpZ2NhcHRpb24sIGZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsIFxcbm1lbnUsIG5hdiwgb3V0cHV0LCBydWJ5LCBzZWN0aW9uLCBzdW1tYXJ5LFxcbnRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbyB7XFxuXFx0bWFyZ2luOiAwO1xcblxcdHBhZGRpbmc6IDA7XFxuXFx0Ym9yZGVyOiAwO1xcblxcdGZvbnQtc2l6ZTogMTAwJTtcXG5cXHRmb250OiBpbmhlcml0O1xcblxcdHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG59XFxuLyogSFRNTDUgZGlzcGxheS1yb2xlIHJlc2V0IGZvciBvbGRlciBicm93c2VycyAqL1xcbmFydGljbGUsIGFzaWRlLCBkZXRhaWxzLCBmaWdjYXB0aW9uLCBmaWd1cmUsIFxcbmZvb3RlciwgaGVhZGVyLCBoZ3JvdXAsIG1lbnUsIG5hdiwgc2VjdGlvbiB7XFxuXFx0ZGlzcGxheTogYmxvY2s7XFxufVxcbmJvZHkge1xcblxcdGxpbmUtaGVpZ2h0OiAxO1xcbn1cXG5vbCwgdWwge1xcblxcdGxpc3Qtc3R5bGU6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGUsIHEge1xcblxcdHF1b3Rlczogbm9uZTtcXG59XFxuYmxvY2txdW90ZTpiZWZvcmUsIGJsb2NrcXVvdGU6YWZ0ZXIsXFxucTpiZWZvcmUsIHE6YWZ0ZXIge1xcblxcdGNvbnRlbnQ6ICcnO1xcblxcdGNvbnRlbnQ6IG5vbmU7XFxufVxcbnRhYmxlIHtcXG5cXHRib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcblxcdGJvcmRlci1zcGFjaW5nOiAwO1xcbn1cXG5cXG5idXR0b257XFxuXFx0b3V0bGluZTowO1xcblxcdGJvcmRlcjowO1xcbn1cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGVzL3Jlc2V0LmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTs7O0NBR0M7QUFDRDs7Ozs7Ozs7Ozs7OztDQWFDLFNBQVM7Q0FDVCxVQUFVO0NBQ1YsU0FBUztDQUNULGVBQWU7Q0FDZixhQUFhO0NBQ2Isd0JBQXdCO0FBQ3pCO0FBQ0EsZ0RBQWdEO0FBQ2hEOztDQUVDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsY0FBYztBQUNmO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLFlBQVk7QUFDYjtBQUNBOztDQUVDLFdBQVc7Q0FDWCxhQUFhO0FBQ2Q7QUFDQTtDQUNDLHlCQUF5QjtDQUN6QixpQkFBaUI7QUFDbEI7O0FBRUE7Q0FDQyxTQUFTO0NBQ1QsUUFBUTtBQUNUXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvIFxcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCwgXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XFxuXFxuYnV0dG9ue1xcblxcdG91dGxpbmU6MDtcXG5cXHRib3JkZXI6MDtcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuL2JlYmFzbmV1ZS50dGZcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJAZm9udC1mYWNlIHtcXG4gIGZvbnQtZmFtaWx5OiBiZWJhcztcXG4gIHNyYzogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyArIFwiKTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG46cm9vdCB7XFxuICAtLXRhYmxlLW91dGxpbmUtY29sb3I6ICNlNGU0ZmY7XFxuICAtLWNlbGwtc2l6ZTogMzBweDtcXG4gIC0tYmctY29sb3I6ICNmN2Y3ZmY7XFxuICAtLXNoaXAtY2VsbC1jb2xvcjogIzU0NWU3NTtcXG4gIC0tcGxheUJ0bi1jb2xvcjogI2YyZDBhNDtcXG4gIC0tZ29vZC1oaXQtY29sb3I6ICMzZjgyNmQ7XFxuICAtLWJhZC1oaXQtY29sb3I6ICNjMDMyMjE7XFxufVxcblxcbmJvZHkge1xcbiAgZm9udC1mYW1pbHk6IGJlYmFzLCBzYW5zLXNlcmlmO1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGdhcDogNWVtO1xcbiAgaGVpZ2h0OiAxMDB2aDtcXG4gIHdpZHRoOiAxMDB2dztcXG4gIHBsYWNlLWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTtcXG59XFxuXFxuaDEge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zaXplOiAxMDBweDtcXG4gIGNvbG9yOiB2YXIoLS1zaGlwLWNlbGwtY29sb3IpO1xcbn1cXG4jYmF0dGxlZmllbGRzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBnYXA6IDEwZW07XFxufVxcblxcbi5ib2FyZCB7XFxuICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xcbiAgYm9yZGVyLXNwYWNpbmc6IDFweDtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG59XFxuXFxudGQge1xcbiAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXRhYmxlLW91dGxpbmUtY29sb3IpO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgaGVpZ2h0OiB2YXIoLS1jZWxsLXNpemUpO1xcbiAgd2lkdGg6IHZhcigtLWNlbGwtc2l6ZSk7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbnRkLm1pc3NlZC1oaXQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFkLWhpdC1jb2xvcik7XFxufVxcblxcbnRkLmdvb2QtaGl0IC5zaGlwLWNlbGwge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZ29vZC1oaXQtY29sb3IpO1xcbn1cXG5cXG4jcGxheUJ1dHRvbiB7XFxuICBmb250LWZhbWlseTogYmViYXM7XFxuICBmb250LXNpemU6IDUwcHg7XFxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2hpcC1jZWxsLWNvbG9yKTtcXG4gIGNvbG9yOiB2YXIoLS1iZy1jb2xvcik7XFxufVxcblxcbiNwbGF5QnV0dG9uOmhvdmVyLFxcbiNwbGF5QnV0dG9uLnN0YXJ0ZWQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZ29vZC1oaXQtY29sb3IpO1xcbn1cXG5cXG4uc2hpcC1jZWxsIHtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNoaXAtY2VsbC1jb2xvcik7XFxufVxcblxcbiNteUJvYXJkIC5zaGlwLWNlbGwge1xcbiAgY3Vyc29yOiBtb3ZlO1xcbn1cXG5cXG4uc2hpcC1jZWxsLmhpZGRlbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXG59XFxuXFxuLnNoaXAtY2VsbC5kcmFnZ2luZyB7XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcblxcbi5naG9zdC1jZWxsIHtcXG4gIC8qIGJhY2tncm91bmQtY29sb3I6IHJnYigyMTYsIDIxNiwgMjE2KTsgKi9cXG4gIG91dGxpbmU6IDNweCBkb3R0ZWQ7XFxufVxcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDgwMHB4KSB7XFxuICBib2R5IHtcXG4gICAgcGFkZGluZy10b3A6IDIwcHg7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGdhcDogNWVtO1xcbiAgICBoZWlnaHQ6IGF1dG87XFxuICAgIHdpZHRoOiAxMDB2dztcXG4gIH1cXG4gIGgxIHtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBmb250LXNpemU6IDgwcHg7XFxuICB9XFxuICAjYmF0dGxlZmllbGRzIHtcXG4gICAgLyogb3V0bGluZTogNXB4IHNvbGlkOyAqL1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgfVxcbiAgI3BsYXlCdXR0b24ge1xcbiAgICB3aWR0aDogMjAwcHg7XFxuICB9XFxufVxcblxcbi8qIFNvdXJjZSBvZiBob3ZlciBlZmZlY3QgOiBodHRwczovL2NvZGVwZW4uaW8vdF9hZmlmL3Blbi9wb2F3TGVRICovXFxuLmhvdmVyLTIge1xcbiAgLS1jOiB2YXIoLS1nb29kLWhpdC1jb2xvcik7IC8qIHRoZSBjb2xvciAqL1xcbiAgLS1iOiAwLjFlbTsgLyogYm9yZGVyIGxlbmd0aCovXFxuICAtLWQ6IDIwcHg7IC8qIHRoZSBjdWJlIGRlcHRoICovXFxuXFxuICAtLV9zOiBjYWxjKHZhcigtLWQpICsgdmFyKC0tYikpO1xcblxcbiAgY29sb3I6IHZhcigtLWMpO1xcbiAgYm9yZGVyOiBzb2xpZCAjMDAwMDtcXG4gIGJvcmRlci13aWR0aDogdmFyKC0tYikgdmFyKC0tYikgdmFyKC0tX3MpIHZhcigtLV9zKTtcXG4gIGJhY2tncm91bmQ6IGNvbmljLWdyYWRpZW50KFxcbiAgICAgICAgYXQgbGVmdCB2YXIoLS1kKSBib3R0b20gdmFyKC0tZCksXFxuICAgICAgICAjMDAwMCA5MGRlZyxcXG4gICAgICAgIHJnYigyNTUgMjU1IDI1NSAvMC4zKSAwIDIyNWRlZyxcXG4gICAgICAgIHJnYigyNTUgMjU1IDI1NSAvMC42KSAwXFxuICAgICAgKVxcbiAgICAgIGJvcmRlci1ib3gsXFxuICAgIGNvbmljLWdyYWRpZW50KGF0IGxlZnQgdmFyKC0tX3MpIGJvdHRvbSB2YXIoLS1fcyksICMwMDAwIDkwZGVnLCB2YXIoLS1jKSAwKVxcbiAgICAgIDAgMTAwJSAvIGNhbGMoMTAwJSAtIHZhcigtLWIpKSBjYWxjKDEwMCUgLSB2YXIoLS1iKSkgYm9yZGVyLWJveDtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKGNhbGModmFyKC0tZCkgLyAtMSksIHZhcigtLWQpKTtcXG4gIGNsaXAtcGF0aDogcG9seWdvbihcXG4gICAgdmFyKC0tZCkgMCUsXFxuICAgIHZhcigtLWQpIDAlLFxcbiAgICAxMDAlIDAlLFxcbiAgICAxMDAlIGNhbGMoMTAwJSAtIHZhcigtLWQpKSxcXG4gICAgMTAwJSBjYWxjKDEwMCUgLSB2YXIoLS1kKSksXFxuICAgIHZhcigtLWQpIGNhbGMoMTAwJSAtIHZhcigtLWQpKVxcbiAgKTtcXG4gIHRyYW5zaXRpb246IDAuNXM7XFxufVxcbi5ob3Zlci0yOmhvdmVyIHtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApO1xcbiAgY2xpcC1wYXRoOiBwb2x5Z29uKFxcbiAgICAwJSB2YXIoLS1kKSxcXG4gICAgdmFyKC0tZCkgMCUsXFxuICAgIDEwMCUgMCUsXFxuICAgIDEwMCUgY2FsYygxMDAlIC0gdmFyKC0tZCkpLFxcbiAgICBjYWxjKDEwMCUgLSB2YXIoLS1kKSkgMTAwJSxcXG4gICAgMCUgMTAwJVxcbiAgKTtcXG59XFxuXFxuaDMge1xcbiAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjtcXG4gIGZvbnQtc2l6ZTogNHJlbTtcXG4gIG1hcmdpbjogMCBhdXRvO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgcGFkZGluZzogMCAwLjFlbTtcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlcy9zdHlsZXMuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usa0JBQWtCO0VBQ2xCLDRDQUEyQjtFQUMzQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSw4QkFBOEI7RUFDOUIsaUJBQWlCO0VBQ2pCLG1CQUFtQjtFQUNuQiwwQkFBMEI7RUFDMUIsd0JBQXdCO0VBQ3hCLHlCQUF5QjtFQUN6Qix3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSw4QkFBOEI7RUFDOUIsYUFBYTtFQUNiLFFBQVE7RUFDUixhQUFhO0VBQ2IsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLDZCQUE2QjtBQUMvQjtBQUNBO0VBQ0UsYUFBYTtFQUNiLFNBQVM7QUFDWDs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQix3QkFBd0I7RUFDeEIsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHNDQUFzQztBQUN4Qzs7QUFFQTtFQUNFLHVDQUF1QztBQUN6Qzs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsbUJBQW1CO0VBQ25CLHdDQUF3QztFQUN4QyxzQkFBc0I7QUFDeEI7O0FBRUE7O0VBRUUsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLHdDQUF3QztBQUMxQzs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLDBDQUEwQztFQUMxQyxtQkFBbUI7QUFDckI7QUFDQTtFQUNFO0lBQ0UsaUJBQWlCO0lBQ2pCLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLFFBQVE7SUFDUixZQUFZO0lBQ1osWUFBWTtFQUNkO0VBQ0E7SUFDRSxrQkFBa0I7SUFDbEIsZUFBZTtFQUNqQjtFQUNBO0lBQ0Usd0JBQXdCO0lBQ3hCLHNCQUFzQjtFQUN4QjtFQUNBO0lBQ0UsWUFBWTtFQUNkO0FBQ0Y7O0FBRUEsbUVBQW1FO0FBQ25FO0VBQ0UsMEJBQTBCLEVBQUUsY0FBYztFQUMxQyxVQUFVLEVBQUUsaUJBQWlCO0VBQzdCLFNBQVMsRUFBRSxtQkFBbUI7O0VBRTlCLCtCQUErQjs7RUFFL0IsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixtREFBbUQ7RUFDbkQ7Ozs7Ozs7O3FFQVFtRTtFQUNuRSxtREFBbUQ7RUFDbkQ7Ozs7Ozs7R0FPQztFQUNELGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsMEJBQTBCO0VBQzFCOzs7Ozs7O0dBT0M7QUFDSDs7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyxlQUFlO0VBQ2YsY0FBYztFQUNkLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiQGZvbnQtZmFjZSB7XFxuICBmb250LWZhbWlseTogYmViYXM7XFxuICBzcmM6IHVybChcXFwiLi9iZWJhc25ldWUudHRmXFxcIik7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuXFxuOnJvb3Qge1xcbiAgLS10YWJsZS1vdXRsaW5lLWNvbG9yOiAjZTRlNGZmO1xcbiAgLS1jZWxsLXNpemU6IDMwcHg7XFxuICAtLWJnLWNvbG9yOiAjZjdmN2ZmO1xcbiAgLS1zaGlwLWNlbGwtY29sb3I6ICM1NDVlNzU7XFxuICAtLXBsYXlCdG4tY29sb3I6ICNmMmQwYTQ7XFxuICAtLWdvb2QtaGl0LWNvbG9yOiAjM2Y4MjZkO1xcbiAgLS1iYWQtaGl0LWNvbG9yOiAjYzAzMjIxO1xcbn1cXG5cXG5ib2R5IHtcXG4gIGZvbnQtZmFtaWx5OiBiZWJhcywgc2Fucy1zZXJpZjtcXG4gIGRpc3BsYXk6IGdyaWQ7XFxuICBnYXA6IDVlbTtcXG4gIGhlaWdodDogMTAwdmg7XFxuICB3aWR0aDogMTAwdnc7XFxuICBwbGFjZS1jb250ZW50OiBjZW50ZXI7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7XFxufVxcblxcbmgxIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMTAwcHg7XFxuICBjb2xvcjogdmFyKC0tc2hpcC1jZWxsLWNvbG9yKTtcXG59XFxuI2JhdHRsZWZpZWxkcyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZ2FwOiAxMGVtO1xcbn1cXG5cXG4uYm9hcmQge1xcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcXG4gIGJvcmRlci1zcGFjaW5nOiAxcHg7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbnRkIHtcXG4gIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS10YWJsZS1vdXRsaW5lLWNvbG9yKTtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGhlaWdodDogdmFyKC0tY2VsbC1zaXplKTtcXG4gIHdpZHRoOiB2YXIoLS1jZWxsLXNpemUpO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG50ZC5taXNzZWQtaGl0IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhZC1oaXQtY29sb3IpO1xcbn1cXG5cXG50ZC5nb29kLWhpdCAuc2hpcC1jZWxsIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWdvb2QtaGl0LWNvbG9yKTtcXG59XFxuXFxuI3BsYXlCdXR0b24ge1xcbiAgZm9udC1mYW1pbHk6IGJlYmFzO1xcbiAgZm9udC1zaXplOiA1MHB4O1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNoaXAtY2VsbC1jb2xvcik7XFxuICBjb2xvcjogdmFyKC0tYmctY29sb3IpO1xcbn1cXG5cXG4jcGxheUJ1dHRvbjpob3ZlcixcXG4jcGxheUJ1dHRvbi5zdGFydGVkIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWdvb2QtaGl0LWNvbG9yKTtcXG59XFxuXFxuLnNoaXAtY2VsbCB7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zaGlwLWNlbGwtY29sb3IpO1xcbn1cXG5cXG4jbXlCb2FyZCAuc2hpcC1jZWxsIHtcXG4gIGN1cnNvcjogbW92ZTtcXG59XFxuXFxuLnNoaXAtY2VsbC5oaWRkZW4ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcblxcbi5zaGlwLWNlbGwuZHJhZ2dpbmcge1xcbiAgb3BhY2l0eTogMC41O1xcbn1cXG5cXG4uZ2hvc3QtY2VsbCB7XFxuICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjE2LCAyMTYsIDIxNik7ICovXFxuICBvdXRsaW5lOiAzcHggZG90dGVkO1xcbn1cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA4MDBweCkge1xcbiAgYm9keSB7XFxuICAgIHBhZGRpbmctdG9wOiAyMHB4O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBnYXA6IDVlbTtcXG4gICAgaGVpZ2h0OiBhdXRvO1xcbiAgICB3aWR0aDogMTAwdnc7XFxuICB9XFxuICBoMSB7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgZm9udC1zaXplOiA4MHB4O1xcbiAgfVxcbiAgI2JhdHRsZWZpZWxkcyB7XFxuICAgIC8qIG91dGxpbmU6IDVweCBzb2xpZDsgKi9cXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIH1cXG4gICNwbGF5QnV0dG9uIHtcXG4gICAgd2lkdGg6IDIwMHB4O1xcbiAgfVxcbn1cXG5cXG4vKiBTb3VyY2Ugb2YgaG92ZXIgZWZmZWN0IDogaHR0cHM6Ly9jb2RlcGVuLmlvL3RfYWZpZi9wZW4vcG9hd0xlUSAqL1xcbi5ob3Zlci0yIHtcXG4gIC0tYzogdmFyKC0tZ29vZC1oaXQtY29sb3IpOyAvKiB0aGUgY29sb3IgKi9cXG4gIC0tYjogMC4xZW07IC8qIGJvcmRlciBsZW5ndGgqL1xcbiAgLS1kOiAyMHB4OyAvKiB0aGUgY3ViZSBkZXB0aCAqL1xcblxcbiAgLS1fczogY2FsYyh2YXIoLS1kKSArIHZhcigtLWIpKTtcXG5cXG4gIGNvbG9yOiB2YXIoLS1jKTtcXG4gIGJvcmRlcjogc29saWQgIzAwMDA7XFxuICBib3JkZXItd2lkdGg6IHZhcigtLWIpIHZhcigtLWIpIHZhcigtLV9zKSB2YXIoLS1fcyk7XFxuICBiYWNrZ3JvdW5kOiBjb25pYy1ncmFkaWVudChcXG4gICAgICAgIGF0IGxlZnQgdmFyKC0tZCkgYm90dG9tIHZhcigtLWQpLFxcbiAgICAgICAgIzAwMDAgOTBkZWcsXFxuICAgICAgICByZ2IoMjU1IDI1NSAyNTUgLzAuMykgMCAyMjVkZWcsXFxuICAgICAgICByZ2IoMjU1IDI1NSAyNTUgLzAuNikgMFxcbiAgICAgIClcXG4gICAgICBib3JkZXItYm94LFxcbiAgICBjb25pYy1ncmFkaWVudChhdCBsZWZ0IHZhcigtLV9zKSBib3R0b20gdmFyKC0tX3MpLCAjMDAwMCA5MGRlZywgdmFyKC0tYykgMClcXG4gICAgICAwIDEwMCUgLyBjYWxjKDEwMCUgLSB2YXIoLS1iKSkgY2FsYygxMDAlIC0gdmFyKC0tYikpIGJvcmRlci1ib3g7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZShjYWxjKHZhcigtLWQpIC8gLTEpLCB2YXIoLS1kKSk7XFxuICBjbGlwLXBhdGg6IHBvbHlnb24oXFxuICAgIHZhcigtLWQpIDAlLFxcbiAgICB2YXIoLS1kKSAwJSxcXG4gICAgMTAwJSAwJSxcXG4gICAgMTAwJSBjYWxjKDEwMCUgLSB2YXIoLS1kKSksXFxuICAgIDEwMCUgY2FsYygxMDAlIC0gdmFyKC0tZCkpLFxcbiAgICB2YXIoLS1kKSBjYWxjKDEwMCUgLSB2YXIoLS1kKSlcXG4gICk7XFxuICB0cmFuc2l0aW9uOiAwLjVzO1xcbn1cXG4uaG92ZXItMjpob3ZlciB7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAwKTtcXG4gIGNsaXAtcGF0aDogcG9seWdvbihcXG4gICAgMCUgdmFyKC0tZCksXFxuICAgIHZhcigtLWQpIDAlLFxcbiAgICAxMDAlIDAlLFxcbiAgICAxMDAlIGNhbGMoMTAwJSAtIHZhcigtLWQpKSxcXG4gICAgY2FsYygxMDAlIC0gdmFyKC0tZCkpIDEwMCUsXFxuICAgIDAlIDEwMCVcXG4gICk7XFxufVxcblxcbmgzIHtcXG4gIGZvbnQtZmFtaWx5OiBzeXN0ZW0tdWksIHNhbnMtc2VyaWY7XFxuICBmb250LXNpemU6IDRyZW07XFxuICBtYXJnaW46IDAgYXV0bztcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHBhZGRpbmc6IDAgMC4xZW07XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICB1cmwgPSBTdHJpbmcodXJsLl9fZXNNb2R1bGUgPyB1cmwuZGVmYXVsdCA6IHVybCk7XG5cbiAgLy8gSWYgdXJsIGlzIGFscmVhZHkgd3JhcHBlZCBpbiBxdW90ZXMsIHJlbW92ZSB0aGVtXG4gIGlmICgvXlsnXCJdLipbJ1wiXSQvLnRlc3QodXJsKSkge1xuICAgIHVybCA9IHVybC5zbGljZSgxLCAtMSk7XG4gIH1cbiAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgIHVybCArPSBvcHRpb25zLmhhc2g7XG4gIH1cblxuICAvLyBTaG91bGQgdXJsIGJlIHdyYXBwZWQ/XG4gIC8vIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXZhbHVlcy0zLyN1cmxzXG4gIGlmICgvW1wiJygpIFxcdFxcbl18KCUyMCkvLnRlc3QodXJsKSB8fCBvcHRpb25zLm5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csIFwiXFxcXG5cIiksIFwiXFxcIlwiKTtcbiAgfVxuICByZXR1cm4gdXJsO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgXCJcIikuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5ET00gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXhCeUlkZW50aWZpZXIgIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZXIgPSBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMuYnlJbmRleCA9IGk7XG4gICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoaSwgMCwge1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiB1cGRhdGVyLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuXG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB1cGRhdGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5ET01bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRE9NW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuXG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuXG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICBpZiAobm9uY2UpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuXG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG5cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpO1xuICB9XG5cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuXG4gIGNzcyArPSBvYmouY3NzO1xuXG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9yZXNldC5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3Jlc2V0LmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZXMuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiLyoqXG4gKiBDbGFzcyBmb3IgYm9hcmRzIG9uIHdoaWNoIHNoaXBzIGFyZSBwbGFjZWQuXG4gKi9cbmNsYXNzIEJvYXJkIHtcbiAgX2JvYXJkOyAvLyBhIDJEIGdyaWQgY29udGFpbmluZyBvbmx5IDBzIGFuZCAxc1xuXG4gIF9zaGlwQXJyYXk7IC8vIGEgbGlzdCBvZiBTaGlwIG9iamVjdHMgcmVwcmVzZW50aW5nIHNoaXBzIG9uIGJvYXJkLlxuXG4gIF9pbmRleDsgLy8gaW5kZXggb2YgYm9hcmQuIDAgb3IgMVxuXG4gIGNvbnN0cnVjdG9yKGJvYXJkSW5kZXggPSAwKSB7XG4gICAgdGhpcy5fYm9hcmQgPSBbLi4uQXJyYXkoQm9hcmQuQk9BUkRfU0laRSldLm1hcCgoKSA9PlxuICAgICAgQXJyYXkoQm9hcmQuQk9BUkRfU0laRSkuZmlsbChCb2FyZC5FTVBUWV9DRUxMKVxuICAgICk7XG4gICAgaWYgKFxuICAgICAgYm9hcmRJbmRleCAhPT0gQm9hcmQuTVlfQk9BUkRfSU5ERVggJiZcbiAgICAgIGJvYXJkSW5kZXggIT09IEJvYXJkLlJJVkFMX0JPQVJEX0lOREVYXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYm9hcmQgaW5kZXggJHtib2FyZEluZGV4fWApO1xuICAgIH1cbiAgICB0aGlzLl9pbmRleCA9IGJvYXJkSW5kZXg7XG4gIH1cblxuICBnZXQgaW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luZGV4O1xuICB9XG5cbiAgc3RhdGljIGdldCBNWV9CT0FSRF9JTkRFWCgpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUklWQUxfQk9BUkRfSU5ERVgoKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICBzdGF0aWMgZ2V0IEVNUFRZX0NFTEwoKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IFNISVBfQ0VMTCgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQk9BUkRfU0laRSgpIHtcbiAgICByZXR1cm4gMTA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIDJEIG1hdHJpeCBvZiAwcyBhbmQgMXMgd2hlcmUgdGhlIDFzIHJlcHJlc2VudCBzaGlwIGNlbGxzLlxuICAgKiBAcmV0dXJucyB7W1tdXX1cbiAgICovXG4gIGdldCBiYXNpY0JvYXJkKCkge1xuICAgIHJldHVybiB0aGlzLl9ib2FyZDtcbiAgfVxuXG4gIHNldENlbGxWYWx1ZShjZWxsUG9zLCBjZWxsVmFsdWUpIHtcbiAgICBpZiAoXG4gICAgICBjZWxsUG9zIDwgMCB8fFxuICAgICAgY2VsbFBvcyA+PSBCb2FyZC5CT0FSRF9TSVpFICogQm9hcmQuQk9BUkRfU0laRSB8fFxuICAgICAgIShjZWxsVmFsdWUgPT09IEJvYXJkLkVNUFRZX0NFTEwgfHwgY2VsbFZhbHVlID09PSBCb2FyZC5TSElQX0NFTEwpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgY2VsbCB2YWx1ZSB0byAke2NlbGxWYWx1ZX0gYXQgJHtjZWxsUG9zfWApO1xuICAgIH1cbiAgICBjb25zdCByb3cgPSBwYXJzZUludChjZWxsUG9zIC8gQm9hcmQuQk9BUkRfU0laRSwgMTApO1xuICAgIGNvbnN0IGNvbCA9IGNlbGxQb3MgJSBCb2FyZC5CT0FSRF9TSVpFO1xuICAgIHRoaXMuX2JvYXJkW3Jvd11bY29sXSA9IGNlbGxWYWx1ZTtcbiAgfVxuXG4gIGdldENlbGxWYWx1ZShjZWxsUG9zKSB7XG4gICAgaWYgKGNlbGxQb3MgPCAwIHx8IGNlbGxQb3MgPj0gQm9hcmQuQk9BUkRfU0laRSAqIEJvYXJkLkJPQVJEX1NJWkUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGdldCBjZWxsIHZhbHVlIGF0ICR7Y2VsbFBvc31gKTtcbiAgICB9XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoY2VsbFBvcyAvIEJvYXJkLkJPQVJEX1NJWkUsIDEwKTtcbiAgICBjb25zdCBjb2wgPSBjZWxsUG9zICUgQm9hcmQuQk9BUkRfU0laRTtcbiAgICByZXR1cm4gdGhpcy5fYm9hcmRbcm93XVtjb2xdO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgc2hpcHMgb24gYm9hcmQgb25seSBpZiBgc2hpcEFycmF5YCBpcyB2YWxpZC5cbiAgICogQHBhcmFtIHtbU2hpcF19IHNoaXBBcnJheSBBbiBhcnJheSBvZiAxMCBzaGlwIG9iamVjdHNcbiAgICovXG4gIGxvYWRTaGlwcyhzaGlwQXJyYXkpIHtcbiAgICAvLyBjcmVhdGUgYSBuZXcgYmFzaWMgYm9hcmQgdXNpbmcgc2hpcEFycmF5XG4gICAgY29uc3QgbmV3Qm9hcmQgPSBbLi4uQXJyYXkoQm9hcmQuQk9BUkRfU0laRSldLm1hcCgoKSA9PlxuICAgICAgQXJyYXkoQm9hcmQuQk9BUkRfU0laRSkuZmlsbChCb2FyZC5FTVBUWV9DRUxMKVxuICAgICk7XG4gICAgc2hpcEFycmF5LmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuZ2V0Q2VsbFBvc2l0aW9ucygpLmZvckVhY2goKGNlbGxQb3MpID0+IHtcbiAgICAgICAgbmV3Qm9hcmRbcGFyc2VJbnQoY2VsbFBvcyAvIEJvYXJkLkJPQVJEX1NJWkUsIDEwKV1bXG4gICAgICAgICAgY2VsbFBvcyAlIEJvYXJkLkJPQVJEX1NJWkVcbiAgICAgICAgXSA9IEJvYXJkLlNISVBfQ0VMTDtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gaWYgYm9hcmQgaXMgdmFsaWQsIHVwZGF0ZSB0cnVlIGJvYXJkLlxuICAgIGlmIChCb2FyZC52YWxpZGF0ZShuZXdCb2FyZCkpIHtcbiAgICAgIHRoaXMuX2JvYXJkID0gbmV3Qm9hcmQ7XG4gICAgICB0aGlzLl9zaGlwQXJyYXkgPSBzaGlwQXJyYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKG5ld0JvYXJkLCBzaGlwQXJyYXkpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBib2FyZCBjb25maWd1cmF0aW9uIGdpdmVuIGJ5IHNoaXBBcnJheVwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgc2hpcHMgZnJvbSBib2FyZC5cbiAgICovXG4gIHJlc2V0Qm9hcmQoKSB7XG4gICAgdGhpcy5fYm9hcmQgPSBbLi4uQXJyYXkoQm9hcmQuQk9BUkRfU0laRSldLm1hcCgoKSA9PlxuICAgICAgQXJyYXkoQm9hcmQuQk9BUkRfU0laRSkuZmlsbChCb2FyZC5FTVBUWV9DRUxMKVxuICAgICk7XG4gICAgdGhpcy5fc2hpcEFycmF5ID0gW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2hpcCBvYmplY3Qgb2YgdGhlIHNoaXAgaGF2aW5nIGEgc2hpcCBjZWxsIGF0IGBwb3NgLlxuICAgKiBSZXR1cm5zIGBudWxsYCBpZiB0aGVyZSdzIG5vIHNoaXAgYXQgZ2l2ZW4gcG9zaXRpb24uXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiBzaGlwIGNvcnJlc3BvbmRpbmcgdG8gc2hpcCBjZWxsIGNvdWxkIG5vdCBiZSBmb3VuZC5cbiAgICogQHBhcmFtIHtpbnR9IHBvcyBJbnRlZ2VyIGAwYC1gOTlgXG4gICAqIEByZXR1cm5zIHtTaGlwfVxuICAgKi9cbiAgZ2V0U2hpcEF0KHBvcykge1xuICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGEgc2hpcCBjZWxsIGF0IGdpdmVuIHBvc2l0aW9uXG4gICAgaWYgKHRoaXMuZ2V0Q2VsbFZhbHVlKHBvcykgIT09IEJvYXJkLlNISVBfQ0VMTCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gZmluZCBzaGlwIHdoaWNoIGhhcyBhIGNlbGwgYXQgZ2l2ZW4gcG9zXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zaGlwQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9zaGlwQXJyYXlbaV0uZ2V0Q2VsbFBvc2l0aW9ucygpLmluY2x1ZGVzKHBvcykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoaXBBcnJheVtpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNoaXAgY2VsbCBmb3VuZCBvbiBib2FyZCBhdCAke3Bvc31gLCB0aGlzLl9ib2FyZCk7XG4gIH1cblxuICAvKipcbiAgICogTW92ZXMgYSBzaGlwIHRvIGEgbmV3IHBvc2l0aW9uLiBJZiBuZXcgcG9zaXRpb24gaXMgaW52YWxpZCwgZnVuY3Rpb24gcmV0dXJucyBmYWxzZS5cbiAgICogQHBhcmFtIHtTaGlwfSBzaGlwT2JqXG4gICAqIEBwYXJhbSB7aW50fSBuZXdIZWFkUG9zXG4gICAqIEByZXR1cm5zIHtib29sfSBUcnVlIGlmIHNoaXAgaGFzIGNoYW5nZWQgcG9zaXRpb24uXG4gICAqL1xuICBtb3ZlU2hpcChzaGlwT2JqLCBuZXdIZWFkUG9zKSB7XG4gICAgaWYgKHNoaXBPYmogPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihgU2hpcE9iaiBjYW5ub3QgYmUgbnVsbGApO1xuICAgIGlmIChzaGlwT2JqLmhlYWRQb3MgPT09IG5ld0hlYWRQb3MpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkUm93ID0gcGFyc2VJbnQobmV3SGVhZFBvcyAvIEJvYXJkLkJPQVJEX1NJWkUsIDEwKTtcbiAgICBjb25zdCBoZWFkQ29sID0gbmV3SGVhZFBvcyAlIEJvYXJkLkJPQVJEX1NJWkU7XG5cbiAgICAvLyBpZiBuZXcgc2hpcCBkb2VzIG5vdCBmaXQgYm9hcmRcbiAgICBjb25zdCBvcmlnaW5hbFBvcyA9IHNoaXBPYmouaGVhZFBvcztcbiAgICBzaGlwT2JqLmhlYWRQb3MgPSBuZXdIZWFkUG9zO1xuICAgIGlmICghc2hpcE9iai5maXRzQm9hcmQoc2hpcE9iai5pc1ZlcnRpY2FsKSkge1xuICAgICAgc2hpcE9iai5oZWFkUG9zID0gb3JpZ2luYWxQb3M7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNoaXBPYmouaGVhZFBvcyA9IG9yaWdpbmFsUG9zO1xuXG4gICAgLy8gY2xlYXIgY3VycmVudCBzaGlwIGZyb20gYmFzaWMgYm9hcmRcbiAgICBzaGlwT2JqLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgIHRoaXMuc2V0Q2VsbFZhbHVlKHBvcywgQm9hcmQuRU1QVFlfQ0VMTCk7XG4gICAgfSk7XG5cbiAgICAvLyBjaGVjayB0aGF0IG5vIG90aGVyIHNoaXAgd2lsbCB0b3VjaC9vdmVybGFwIG15IHNoaXBcbiAgICBpZiAoIXNoaXBPYmouaXNWZXJ0aWNhbCkge1xuICAgICAgZm9yIChsZXQgcm93ID0gaGVhZFJvdyAtIDE7IHJvdyA8PSBoZWFkUm93ICsgMTsgcm93KyspIHtcbiAgICAgICAgaWYgKCEocm93IDwgMCB8fCByb3cgPj0gQm9hcmQuQk9BUkRfU0laRSkpIHtcbiAgICAgICAgICBmb3IgKGxldCBjb2wgPSBoZWFkQ29sIC0gMTsgY29sIDw9IGhlYWRDb2wgKyBzaGlwT2JqLnNpemU7IGNvbCsrKSB7XG4gICAgICAgICAgICBpZiAoIShjb2wgPCAwIHx8IGNvbCA+PSBCb2FyZC5CT0FSRF9TSVpFKSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5fYm9hcmRbcm93XVtjb2xdID09PSBCb2FyZC5TSElQX0NFTEwpIHtcbiAgICAgICAgICAgICAgICAvLyBuZXcgc2hpcCBwb3NpdGlvbiBpcyBpbnZhbGlkLlxuICAgICAgICAgICAgICAgIC8vIHB1dCBzaGlwIGJhY2sgdG8gaXRzIGluaXRpYWwgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBzaGlwT2JqLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFZhbHVlKHBvcywgQm9hcmQuU0hJUF9DRUxMKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgcm93ID0gaGVhZFJvdyAtIDE7IHJvdyA8PSBoZWFkUm93ICsgc2hpcE9iai5zaXplOyByb3crKykge1xuICAgICAgICBpZiAoIShyb3cgPCAwIHx8IHJvdyA+PSBCb2FyZC5CT0FSRF9TSVpFKSkge1xuICAgICAgICAgIGZvciAobGV0IGNvbCA9IGhlYWRDb2wgLSAxOyBjb2wgPD0gaGVhZENvbCArIDE7IGNvbCsrKSB7XG4gICAgICAgICAgICBpZiAoIShjb2wgPCAwIHx8IGNvbCA+PSBCb2FyZC5CT0FSRF9TSVpFKSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5fYm9hcmRbcm93XVtjb2xdID09PSBCb2FyZC5TSElQX0NFTEwpIHtcbiAgICAgICAgICAgICAgICAvLyBuZXcgc2hpcCBwb3NpdGlvbiBpcyBpbnZhbGlkLlxuICAgICAgICAgICAgICAgIC8vIHB1dCBzaGlwIGJhY2sgdG8gaXRzIGluaXRpYWwgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBzaGlwT2JqLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFZhbHVlKHBvcywgQm9hcmQuU0hJUF9DRUxMKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwbGFjZSBzaGlwIG9uIGJhc2ljIGJvYXJkIGluIGl0cyBuZXcgcG9zaXRpb25cbiAgICBzaGlwT2JqLm1vdmVUbyhuZXdIZWFkUG9zKTtcblxuICAgIHNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpLmZvckVhY2goKHBvcykgPT4ge1xuICAgICAgdGhpcy5zZXRDZWxsVmFsdWUocG9zLCBCb2FyZC5TSElQX0NFTEwpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUm90YXRlcyB0aGUgc2hpcCBpZiBwb3NzaWJsZS5cbiAgICogQHBhcmFtIHtTaGlwfSBzaGlwT2JqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSByb3RhdGlvbiBwZXJmb3JtZWQgb3Igbm90P1xuICAgKi9cbiAgcm90YXRlU2hpcChzaGlwT2JqKSB7XG4gICAgaWYgKHNoaXBPYmogPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihgU2hpcE9iaiBjYW5ub3QgYmUgbnVsbGApO1xuICAgIGlmIChzaGlwT2JqLnNpemUgPT09IDEpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGhlYWRSb3cgPSBwYXJzZUludChzaGlwT2JqLmhlYWRQb3MgLyBCb2FyZC5CT0FSRF9TSVpFLCAxMCk7XG4gICAgY29uc3QgaGVhZENvbCA9IHNoaXBPYmouaGVhZFBvcyAlIEJvYXJkLkJPQVJEX1NJWkU7XG5cbiAgICAvLyBjaGVjayBzdXJyb3VuZGluZyBjZWxscyBvZiByb3RhdGVkIHZlcnNpb24gb2Ygc2hpcFxuICAgIGlmIChzaGlwT2JqLmlzVmVydGljYWwpIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IGhlYWRDb2wgKyAyOyBjb2wgPD0gaGVhZENvbCArIHNoaXBPYmouc2l6ZTsgY29sKyspIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gaGVhZFJvdyAtIDE7IHJvdyA8PSBoZWFkUm93ICsgMTsgcm93KyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb2wgPj0gMCAmJlxuICAgICAgICAgICAgY29sIDwgQm9hcmQuQk9BUkRfU0laRSAmJlxuICAgICAgICAgICAgcm93ID49IDAgJiZcbiAgICAgICAgICAgIHJvdyA8IEJvYXJkLkJPQVJEX1NJWkUgJiZcbiAgICAgICAgICAgIHRoaXMuX2JvYXJkW3Jvd11bY29sXSA9PT0gQm9hcmQuU0hJUF9DRUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IGhlYWRDb2wgLSAxOyBjb2wgPD0gaGVhZENvbCArIDE7IGNvbCsrKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IGhlYWRSb3cgKyAyOyByb3cgPD0gaGVhZFJvdyArIHNoaXBPYmouc2l6ZTsgcm93KyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb2wgPj0gMCAmJlxuICAgICAgICAgICAgY29sIDwgQm9hcmQuQk9BUkRfU0laRSAmJlxuICAgICAgICAgICAgcm93ID49IDAgJiZcbiAgICAgICAgICAgIHJvdyA8IEJvYXJkLkJPQVJEX1NJWkUgJiZcbiAgICAgICAgICAgIHRoaXMuX2JvYXJkW3Jvd11bY29sXSA9PT0gQm9hcmQuU0hJUF9DRUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2xlYXIgY3VycmVudCBzaGlwIGZyb20gYmFzaWMgYm9hcmRcbiAgICBzaGlwT2JqLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgIHRoaXMuc2V0Q2VsbFZhbHVlKHBvcywgQm9hcmQuRU1QVFlfQ0VMTCk7XG4gICAgfSk7XG5cbiAgICBzaGlwT2JqLnJvdGF0ZSgpO1xuXG4gICAgLy8gcGxhY2Ugcm90YXRlZCBzaGlwIG9uIGJhc2ljIGJvYXJkXG4gICAgc2hpcE9iai5nZXRDZWxsUG9zaXRpb25zKCkuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICB0aGlzLnNldENlbGxWYWx1ZShwb3MsIEJvYXJkLlNISVBfQ0VMTCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyBpZiBnaXZlbiBib2FyZCBpcyBhIHZhbGlkIGJvYXJkIGJhc2VkIG9uIHRoZSBydWxlcyBvZiB0aGUgZ2FtZS5cbiAgICogQHBhcmFtIHtbW11dfSBib2FyZCAxMHgxMCBib2FyZCB3aGVyZSAwIGluZGljYXRlcyBlbXB0eSBjZWxsIGFuZCAxIGluZGljYXRlcyBzaGlwIGNlbGxcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgdmFsaWRhdGUoYm9hcmQpIHtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgc2hpcCBjZWxsIGF0IChyb3csIGNvbClcbiAgICAgKiBAcGFyYW0ge1tbXV19IGJvYXJkIDEweDEwIGJvYXJkIHdoZXJlIDAgaW5kaWNhdGVzIGVtcHR5IGNlbGwgYW5kIDEgaW5kaWNhdGVzIHNoaXAgY2VsbFxuICAgICAqIEBwYXJhbSB7Kn0gcm93XG4gICAgICogQHBhcmFtIHsqfSBjb2xcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N1Ym1hcmluZShyb3csIGNvbCkge1xuICAgICAgY29uc3QgcnIgPSBbLTEsIDAsIDEsIDBdOyAvLyB0cmFuc2xhdGlvbnMgZm9yIHJvd1xuICAgICAgY29uc3QgY2MgPSBbMCwgMSwgMCwgLTFdOyAvLyB0cmFuc2xhdGlvbnMgZm9yIGNvbFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdSb3cgPSByb3cgKyBycltpXTtcbiAgICAgICAgY29uc3QgbmV3Q29sID0gY29sICsgY2NbaV07XG4gICAgICAgIGlmIChcbiAgICAgICAgICBuZXdSb3cgPiAtMSAmJlxuICAgICAgICAgIG5ld1JvdyA8IEJvYXJkLkJPQVJEX1NJWkUgJiZcbiAgICAgICAgICBuZXdDb2wgPiAtMSAmJlxuICAgICAgICAgIG5ld0NvbCA8IEJvYXJkLkJPQVJEX1NJWkUgJiZcbiAgICAgICAgICBib2FyZFtuZXdSb3ddW25ld0NvbF0gPT09IEJvYXJkLlNISVBfQ0VMTFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgc2hpcCBjZWxsIGF0IChyb3csIGNvbCkgc2hhcmVzIGEgY29ybmVyXG4gICAgICogIHdpdGggYW5vdGhlciBzaGlwIGNlbGwuXG4gICAgICogQHBhcmFtIHtbW11dfSBib2FyZCAxMHgxMCBib2FyZCB3aGVyZSAwIGluZGljYXRlcyBlbXB0eSBjZWxsIGFuZCAxIGluZGljYXRlcyBzaGlwIGNlbGxcbiAgICAgKiBAcGFyYW0ge2ludH0gcm93XG4gICAgICogQHBhcmFtIHtpbnR9IGNvbFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlsbGVnYWxDZWxsKHJvdywgY29sKSB7XG4gICAgICAvLyB0cmFuc2xhdGlvbnMgdG8gYWNjZXNzIGFsbCA0IGNvcm5lcnNcbiAgICAgIGNvbnN0IHJyID0gWy0xLCAtMSwgMSwgMV07IC8vIHRyYW5zbGF0aW9ucyBmb3Igcm93XG4gICAgICBjb25zdCBjYyA9IFstMSwgMSwgLTEsIDFdOyAvLyB0cmFuc2xhdGlvbnMgZm9yIGNvbFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBjb25zdCByID0gcm93ICsgcnJbaV07XG4gICAgICAgIGNvbnN0IGMgPSBjb2wgKyBjY1tpXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHIgPiAtMSAmJlxuICAgICAgICAgIHIgPCBCb2FyZC5CT0FSRF9TSVpFICYmXG4gICAgICAgICAgYyA+IC0xICYmXG4gICAgICAgICAgYyA8IEJvYXJkLkJPQVJEX1NJWkUgJiZcbiAgICAgICAgICBib2FyZFtyXVtjXSA9PT0gMVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBiID0gMDsgLy8gYmF0dGxlc2hpcCBjb3VudFxuICAgIGxldCBjID0gMDsgLy8gY3J1aXNlciBjb3VudFxuICAgIGxldCBkID0gMDsgLy8gZGVzdHJveWVyIGNvdW50XG4gICAgbGV0IHMgPSAwOyAvLyBzdWJtYXJpbmUgY291bnRcblxuICAgIGxldCBoY2VsbHMgPSAxOyAvLyBjb25zZWN1dGl2ZSBob3Jpem9udGFsIGNlbGxzXG4gICAgbGV0IHZjZWxscyA9IDE7IC8vIGNvbnNlY3V0aXZlIHZlcnRpY2FsIGNlbGxzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEJvYXJkLkJPQVJEX1NJWkU7IGkrKykge1xuICAgICAgaGNlbGxzID0gMTtcbiAgICAgIHZjZWxscyA9IDE7XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgQm9hcmQuQk9BUkRfU0laRTsgaisrKSB7XG4gICAgICAgIGlmIChib2FyZFtpXVtqXSA9PT0gQm9hcmQuU0hJUF9DRUxMKSB7XG4gICAgICAgICAgaWYgKGlsbGVnYWxDZWxsKGksIGopKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1N1Ym1hcmluZShpLCBqKSkge1xuICAgICAgICAgICAgcysrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqID4gMCkge1xuICAgICAgICAgIC8vIGNvdW50IGNvbnNlY3V0aXZlIGhvcml6b250YWwgc2hpcCBjZWxsc1xuICAgICAgICAgIGlmIChib2FyZFtpXVtqXSA9PT0gQm9hcmQuRU1QVFlfQ0VMTCkge1xuICAgICAgICAgICAgLy8gc3RyZWFrIG9mIGNvbnNlY3V0aXZlIGNlbGxzIGVuZHNcbiAgICAgICAgICAgIGlmIChoY2VsbHMgPT09IDQpIGIrKztcbiAgICAgICAgICAgIGlmIChoY2VsbHMgPT09IDMpIGMrKztcbiAgICAgICAgICAgIGlmIChoY2VsbHMgPT09IDIpIGQrKztcbiAgICAgICAgICAgIGhjZWxscyA9IDE7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGJvYXJkW2ldW2pdID09PSBCb2FyZC5TSElQX0NFTEwgJiZcbiAgICAgICAgICAgIGJvYXJkW2ldW2ogLSAxXSA9PT0gQm9hcmQuU0hJUF9DRUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBoY2VsbHMrKztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBjb3VudCBjb25zZWN1dGl2ZSB2ZXJ0aWNhbCBzaGlwIGNlbGxzXG4gICAgICAgICAgaWYgKGJvYXJkW2pdW2ldID09PSBCb2FyZC5FTVBUWV9DRUxMKSB7XG4gICAgICAgICAgICBpZiAodmNlbGxzID09PSA0KSBiKys7XG4gICAgICAgICAgICBpZiAodmNlbGxzID09PSAzKSBjKys7XG4gICAgICAgICAgICBpZiAodmNlbGxzID09PSAyKSBkKys7XG4gICAgICAgICAgICB2Y2VsbHMgPSAxO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBib2FyZFtqXVtpXSA9PT0gQm9hcmQuU0hJUF9DRUxMICYmXG4gICAgICAgICAgICBib2FyZFtqIC0gMV1baV0gPT09IEJvYXJkLlNISVBfQ0VMTFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdmNlbGxzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaGNlbGxzID09PSA0KSBiKys7XG4gICAgICBpZiAodmNlbGxzID09PSA0KSBiKys7XG4gICAgICBpZiAoaGNlbGxzID09PSAzKSBjKys7XG4gICAgICBpZiAodmNlbGxzID09PSAzKSBjKys7XG4gICAgICBpZiAoaGNlbGxzID09PSAyKSBkKys7XG4gICAgICBpZiAodmNlbGxzID09PSAyKSBkKys7XG4gICAgfVxuICAgIGlmIChiID09PSAxICYmIGMgPT09IDIgJiYgZCA9PT0gMyAmJiBzID09PSA0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSAgMkQgbGlzdCBvZiBjb29yZGluYXRlcyBvZiBhbGwgc2hpcHMgb24gYm9hcmQuXG4gICAqIEByZXR1cm5zIHtMaXN0fVxuICAgKi9cbiAgZ2V0QWxsU2hpcFBvc2l0aW9ucygpIHtcbiAgICBjb25zdCBBbGxTaGlwUG9zaXRpb25zID0gW107XG4gICAgdGhpcy5fc2hpcEFycmF5LmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIEFsbFNoaXBQb3NpdGlvbnMucHVzaChzaGlwLmdldENlbGxQb3NpdGlvbnMoKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIEFsbFNoaXBQb3NpdGlvbnM7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEJvYXJkO1xuIiwiY2xhc3MgU2hpcENlbGwge1xuICBfaGl0OyAvLyBpcyBjZWxsIGRlc3Ryb3llZCA/XG5cbiAgX3Bvc2l0aW9uOyAvLyBwb3NpdGlvbiBvZiBjZWxsIG9uIGJvYXJkXG5cbiAgY29uc3RydWN0b3IocG9zaXRpb24pIHtcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMuX2hpdCA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IGhpdCgpIHtcbiAgICByZXR1cm4gdGhpcy5faGl0O1xuICB9XG5cbiAgc2V0IGhpdChoaXR0ZWQpIHtcbiAgICB0aGlzLl9oaXQgPSBoaXR0ZWQ7XG4gIH1cblxuICBzZXQgcG9zKHBvcykge1xuICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zO1xuICB9XG4gIFxuICBnZXQgcG9zKCkge1xuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTaGlwQ2VsbDtcbiIsImltcG9ydCBTaGlwQ2VsbCBmcm9tIFwiLi9zaGlwY2VsbC5qc1wiO1xuaW1wb3J0IEJvYXJkIGZyb20gXCIuL2JvYXJkLmpzXCI7XG4vKipcbiAqIENsYXNzIGZvciBzaGlwcyB3aGljaCBhcmUgcGxhY2VkIG9uIGJhdHRsZWZpZWxkLlxuICovXG5jbGFzcyBTaGlwIHtcbiAgX3ZlcnRpY2FsO1xuXG4gIF9zaXplO1xuXG4gIF9oZWFkUG9zOyAvLyBwb3NpdGlvbiBvZiBoZWFkIG9mIHNoaXAgb24gYm9hcmRcblxuICBfYm9hcmRJbmRleDsgLy8gYm9hcmQgaW4gd2hpY2ggc2hpcCBpcyBmb3VuZFxuXG4gIF9saWZlOyAvLyBudW1iZXIgb2YgYWxpdmUgc2hpcCBjZWxsc1xuXG4gIF9jZWxsc0FycmF5ID0gW107IC8vIGFycmF5IG9mIFNoaXBDZWxsIG9iamVjdHNcblxuICAvKipcbiAgICogSW5pdGlhbGlzZSBzaGlwIG9iamVjdC5cbiAgICogQHBhcmFtIHtpbnR9IHNpemUgTnVtYmVyIG9mIGNlbGxzIG9uIHNoaXAuIE11c3QgYmUgYmV0d2VlbiBgMWAgYW5kIGA0YCBpbmNsdXNpdmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmVydGljYWxseU9yaWVudGVkIGBUcnVlYCBpZiBzaGlwIGlzIHZlcnRpY2FsLlxuICAgKiBAcGFyYW0ge2ludH0gYm9hcmRJbmRleCBib2FyZCAoYDBgIG9yYDFgKSBvbiB3aGljaCBzaGlwIGlzIGZvdW5kLlxuICAgKiBAcGFyYW0ge2ludH0gaGVhZCBQb3NpdGlvbiBvZiBzaGlwIG9uIGJvYXJkLiAoYDBgLWA5OWApXG4gICAqL1xuICBjb25zdHJ1Y3RvcihzaXplLCB2ZXJ0aWNhbGx5T3JpZW50ZWQsIGJvYXJkSW5kZXgsIGhlYWQpIHtcbiAgICBpZiAoIShzaXplID4gMCAmJiBzaXplIDwgNSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2hpcCBzaXplXCIsIHNpemUpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICEoXG4gICAgICAgIChib2FyZEluZGV4ID09PSAwIHx8IGJvYXJkSW5kZXggPT09IDEpICYmIC8vIGJvYXJkIGluZGV4IGVpdGhlciAwIG9yIDFcbiAgICAgICAgaGVhZCA+PSAwICYmXG4gICAgICAgIGhlYWQgPCBCb2FyZC5CT0FSRF9TSVpFICogQm9hcmQuQk9BUkRfU0laRVxuICAgICAgKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzaGlwIGNvb3JkaW5hdGVzXCIsIFtib2FyZEluZGV4LCBoZWFkXSk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5fYm9hcmRJbmRleCA9IGJvYXJkSW5kZXg7XG4gICAgdGhpcy5faGVhZFBvcyA9IGhlYWQ7XG4gICAgdGhpcy5fdmVydGljYWwgPSB2ZXJ0aWNhbGx5T3JpZW50ZWQ7XG4gICAgdGhpcy5fbGlmZSA9IHNpemU7XG5cbiAgICB0aGlzLm1vdmVUbyhoZWFkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgc2hpcCBvZiBnaXZlbiBvcmllbnRhdGlvbiB3aWxsIGZpdCBib2FyZC5cbiAgICogQHBhcmFtIHtib29sZWFufSB2ZXJ0aWNhbE9yaWVudGF0aW9uIG5ldyBvcmllbnRhdGlvbiBvZiBzaGlwXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZml0c0JvYXJkKHZlcnRpY2FsT3JpZW50YXRpb24gPSB0cnVlKSB7XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQodGhpcy5oZWFkUG9zIC8gQm9hcmQuQk9BUkRfU0laRSwgMTApO1xuICAgIGNvbnN0IGNvbCA9IHRoaXMuaGVhZFBvcyAlIEJvYXJkLkJPQVJEX1NJWkU7XG4gICAgaWYgKHZlcnRpY2FsT3JpZW50YXRpb24pIHtcbiAgICAgIGlmIChyb3cgKyB0aGlzLl9zaXplIC0gMSA+PSBCb2FyZC5CT0FSRF9TSVpFKSByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjb2wgKyB0aGlzLl9zaXplIC0gMSA+PSBCb2FyZC5CT0FSRF9TSVpFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0IGlzVmVydGljYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZlcnRpY2FsO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cblxuICBzZXQgaGVhZFBvcyhuZXdQb3MpIHtcbiAgICBpZiAobmV3UG9zID49IDAgJiYgbmV3UG9zIDwgQm9hcmQuQk9BUkRfU0laRSAqIEJvYXJkLkJPQVJEX1NJWkUpIHtcbiAgICAgIHRoaXMuX2hlYWRQb3MgPSBuZXdQb3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCBoZWFkUG9zIHRvICR7bmV3UG9zfWApO1xuICAgIH1cbiAgfVxuXG4gIGdldCBoZWFkUG9zKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFkUG9zO1xuICB9XG5cbiAgZ2V0IGJvYXJkSW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JvYXJkSW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBTaGlwQ2VsbCBvYmplY3RzXG4gICAqL1xuICBnZXQgY2VsbHNBcnJheSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2VsbHNBcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlcyBzaGlwIHRvIGEgbmV3IHBvc2l0aW9uIG9uIGJvYXJkLCBwcmVzZXJ2aW5nIGl0cyBvcmllbnRhdGlvbi5cbiAgICogQHBhcmFtIHtpbnR9IG5ld0hlYWRQb3NcbiAgICovXG4gIG1vdmVUbyhuZXdIZWFkUG9zKSB7XG4gICAgdGhpcy5faGVhZFBvcyA9IG5ld0hlYWRQb3M7XG4gICAgdGhpcy5fY2VsbHNBcnJheSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuZml0c0JvYXJkKHRoaXMuX3ZlcnRpY2FsKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zaXplOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2VsbFBvcyA9XG4gICAgICAgICAgbmV3SGVhZFBvcyArICh0aGlzLl92ZXJ0aWNhbCA/IEJvYXJkLkJPQVJEX1NJWkUgKiBpIDogaSk7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBuZXcgU2hpcENlbGwoY2VsbFBvcyk7XG4gICAgICAgIHRoaXMuX2NlbGxzQXJyYXkucHVzaChjZWxsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU2hpcCBjYW5ub3QgYmUgbW92ZWQgdG8gIyR7bmV3SGVhZFBvc30gKEluc3VmZmljaWVudCBzcGFjZSlgXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJvdGF0YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5maXRzQm9hcmQoIXRoaXMuX3ZlcnRpY2FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSb3RhdGVzIGEgdmVydGljYWwgc2hpcCBhbnRpLWNsb2Nrd2lzZSBPUiByb3RhdGVzIGFcbiAgICogaG9yaXpvbnRhbCBzaGlwIGNsb2Nrd2lzZS4gRml4ZWQgcG9pbnQgaXMgaGVhZCBwb3NpdGlvbi5cbiAgICovXG4gIHJvdGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMucm90YXRhYmxlKCkpIHJldHVybjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fc2l6ZTsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Q2VsbCA9IHRoaXMuX2NlbGxzQXJyYXlbaV07XG4gICAgICBpZiAodGhpcy5fdmVydGljYWwpIHtcbiAgICAgICAgLy8gc2hpcCBpcyBjdXJyZW50bHkgdmVydGljYWwgc28gY29udmVydCB0byBob3Jpem9udGFsXG4gICAgICAgIGN1cnJlbnRDZWxsLnBvcyA9IHRoaXMuX2hlYWRQb3MgKyBpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2hpcCBpcyBjdXJyZW50bHkgaG9yaXpvbnRhbCBzbyBjb252ZXJ0IHRvIHZlcnRpY2FsXG4gICAgICAgIGN1cnJlbnRDZWxsLnBvcyA9IHRoaXMuX2hlYWRQb3MgKyBpICogQm9hcmQuQk9BUkRfU0laRTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl92ZXJ0aWNhbCA9ICF0aGlzLl92ZXJ0aWNhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhIHBhcnRpY3VsYXIgY2VsbCBvZiB0aGUgc2hpcFxuICAgKiBAcGFyYW0ge2ludH0gcG9zXG4gICAqL1xuICBhdHRhY2socG9zKSB7XG4gICAgdGhpcy5fY2VsbHNBcnJheS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBpZiAoY2VsbC5wb3MgPT09IHBvcykge1xuICAgICAgICBjZWxsLmhpdCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xpZmUgPSBNYXRoLm1heCh0aGlzLl9saWZlIC0gMSwgMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBlbnRpcmUgc2hpcCBpcyBkZXN0cm95ZWRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzdW5rKCkge1xuICAgIHJldHVybiB0aGlzLl9saWZlID09PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gbGlzdCBvZiBpbmRpY2VzIHJlcHJlc2VudGluZyB0aGUgcG9zaXRpb24gb2YgZWFjaCBzaGlwIGNlbGwgb24gdGhlIGJvYXJkLlxuICAgKi9cbiAgZ2V0Q2VsbFBvc2l0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fY2VsbHNBcnJheS5tYXAoKGVsKSA9PiBlbC5wb3MpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNoaXA7XG4iLCIvLyBpbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwLmpzXCI7XG4vLyBpbXBvcnQgQm9hcmQgZnJvbSBcIi4vYm9hcmQuanNcIjtcblxuaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IEJvYXJkIGZyb20gXCIuL2JvYXJkXCI7XG5cbmNvbnN0IG1vZGVsID0gKCgpID0+IHtcbiAgbGV0IGdhbWVPbmdvaW5nID0gZmFsc2U7XG4gIGxldCBteVR1cm4gPSB0cnVlO1xuICBjb25zdCBteUJvYXJkID0gbmV3IEJvYXJkKEJvYXJkLk1ZX0JPQVJEX0lOREVYKTtcbiAgY29uc3Qgcml2YWxCb2FyZCA9IG5ldyBCb2FyZChCb2FyZC5SSVZBTF9CT0FSRF9JTkRFWCk7XG4gIGNvbnN0IG15R3Vlc3NlcyA9IFtdO1xuICBjb25zdCByaXZhbEd1ZXNzZXMgPSBbXTtcblxuICAvKipcbiAgICogTG9hZHMgc2hpcHMgb24gYW4gZW1wdHkgYm9hcmQuXG4gICAqL1xuICBmdW5jdGlvbiBpbml0aWFsaXNlQm9hcmRzKCkge1xuICAgIC8vIHJlc2V0IGJvYXJkc1xuICAgIG15Qm9hcmQucmVzZXRCb2FyZCgpO1xuICAgIHJpdmFsQm9hcmQucmVzZXRCb2FyZCgpO1xuXG4gICAgLy8gbG9hZCBzaGlwc1xuICAgIG15Qm9hcmQubG9hZFNoaXBzKGdldERlZmF1bHRGbGVldChteUJvYXJkLmluZGV4KSk7XG4gICAgcml2YWxCb2FyZC5sb2FkU2hpcHMoZ2V0UmFuZG9tRmxlZXQocml2YWxCb2FyZC5pbmRleCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2FtZVN0YXJ0ZWQoKSB7XG4gICAgcmV0dXJuIGdhbWVPbmdvaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xuICAgIGlmIChnYW1lT25nb2luZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHN0YXJ0IGFuIG9uZ29pbmcgZ2FtZSB0d2ljZVwiKTtcbiAgICB9XG4gICAgZ2FtZU9uZ29pbmcgPSB0cnVlO1xuICAgIG15VHVybiA9IHRydWU7XG5cbiAgICAvLyBlbXB0eSBndWVzc2VzXG4gICAgbXlHdWVzc2VzLmxlbmd0aCA9IDA7XG4gICAgcml2YWxHdWVzc2VzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwbGF5ZXIgaGFzIHdvbiB5ZXQuXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gY2hlY2tXaW5uZXIoKSB7XG4gICAgbGV0IGlXb24gPSB0cnVlO1xuICAgIGxldCByV29uID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBwb3MgPSAwOyBwb3MgPCBCb2FyZC5CT0FSRF9TSVpFICogQm9hcmQuQk9BUkRfU0laRTsgcG9zKyspIHtcbiAgICAgIC8vIGNoZWNrIGlmIGkgaGF2ZSBub3Qgd29uXG4gICAgICBpZiAoXG4gICAgICAgIHJpdmFsQm9hcmQuZ2V0Q2VsbFZhbHVlKHBvcykgPT09IEJvYXJkLlNISVBfQ0VMTCAmJlxuICAgICAgICAhbXlHdWVzc2VzLmluY2x1ZGVzKHBvcylcbiAgICAgICkge1xuICAgICAgICBpV29uID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpZiByaXZhbCBoYXMgbm90IHdvblxuICAgICAgaWYgKFxuICAgICAgICBteUJvYXJkLmdldENlbGxWYWx1ZShwb3MpID09PSBCb2FyZC5TSElQX0NFTEwgJiZcbiAgICAgICAgIXJpdmFsR3Vlc3Nlcy5pbmNsdWRlcyhwb3MpXG4gICAgICApIHtcbiAgICAgICAgcldvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaVdvbiB8fCByV29uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYHRydWVgIGlmIGl0IGlzIGxlZnQgcGxheWVyJ3MgdHVybiB0byBhdHRhY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0VHVybigpIHtcbiAgICByZXR1cm4gbXlUdXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kR2FtZSgpIHtcbiAgICBpZiAoIWdhbWVPbmdvaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZW5kIGEgZ2FtZSB0d2ljZVwiKTtcbiAgICB9XG4gICAgZ2FtZU9uZ29pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN3YXBUdXJuKCkge1xuICAgIGlmIChnYW1lT25nb2luZykge1xuICAgICAgbXlUdXJuID0gIW15VHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNoYW5nZSB0dXJuIHdoZW4gZ2FtZSBoYXMgbm90IHN0YXJ0ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhIHNoaXAgY2VsbCBhdCBnaXZlbiBjb29yZGluYXRlc1xuICAgKiBAcGFyYW0ge2ludH0gYm9hcmRJbmRleFxuICAgKiBAcGFyYW0ge2ludH0gcG9zXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gaXNTaGlwKGJvYXJkSW5kZXgsIHBvcykge1xuICAgIGlmIChib2FyZEluZGV4ID09PSBteUJvYXJkLmluZGV4KVxuICAgICAgcmV0dXJuIG15Qm9hcmQuZ2V0Q2VsbFZhbHVlKHBvcykgPT09IEJvYXJkLlNISVBfQ0VMTDtcbiAgICByZXR1cm4gcml2YWxCb2FyZC5nZXRDZWxsVmFsdWUocG9zKSA9PT0gQm9hcmQuU0hJUF9DRUxMO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2YWxpZCBtb3ZlIGJ5IGNvbXB1dGVyLlxuICAgKiBgYXR0YWNrQm9hcmRgIGlzIGFsc28gY2FsbGVkLlxuICAgKiBAcmV0dXJucyB7aW50fSBQb3NpdGlvbiBvZiBjaG9zZW4gY2VsbCBvZiBjb21wdXRlclxuICAgKi9cbiAgZnVuY3Rpb24gY29tcHV0ZXJQbGF5KCkge1xuICAgIGlmIChnZXRUdXJuKCkpIHRocm93IG5ldyBFcnJvcihcIk5vdCBjb21wdXRlcidzIHR1cm4gdG8gcGxheVwiKTtcbiAgICBsZXQgcmFuZG9tTW92ZSA9IDA7XG4gICAgd2hpbGUgKCFhdHRhY2tCb2FyZChyYW5kb21Nb3ZlKSkge1xuICAgICAgcmFuZG9tTW92ZSA9IHBhcnNlSW50KFxuICAgICAgICBNYXRoLnJhbmRvbSgpICogQm9hcmQuQk9BUkRfU0laRSAqIEJvYXJkLkJPQVJEX1NJWkUsXG4gICAgICAgIDEwXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmFuZG9tTW92ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGxpc3Qgb2YgZ3Vlc3Nlcy4gUmV0dXJucyBgdHJ1ZWAgb25seSBpZiBib2FyZCBwb3NpdGlvbiBpcyB2YWxpZFxuICAgKiBhbmQgaGFzIG5vdCBiZWVuIHByZXZpb3VzbHkgYXR0YWNrZWQuXG4gICAqIEBwYXJhbSB7aW50fSBwb3MgcG9zaXRpb24gb2YgZ3Vlc3MgOiAwIC0gOTlcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBmdW5jdGlvbiBhdHRhY2tCb2FyZChwb3MpIHtcbiAgICBpZiAocG9zIDwgMCB8fCBwb3MgPj0gQm9hcmQuQk9BUkRfU0laRSAqIEJvYXJkLkJPQVJEX1NJWkUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGF0dGFjayBpbnZhbGlkIGNvb3JkaW5hdGVzICR7cG9zfWApO1xuICAgIH1cbiAgICBpZiAobXlUdXJuKSB7XG4gICAgICBpZiAobXlHdWVzc2VzLmluY2x1ZGVzKHBvcykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgbXlHdWVzc2VzLnB1c2gocG9zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJpdmFsR3Vlc3Nlcy5pbmNsdWRlcyhwb3MpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJpdmFsR3Vlc3Nlcy5wdXNoKHBvcyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2YWxpZCBmbGVldCBvZiBzaGlwLlxuICAgKiBAcGFyYW0ge2ludH0gYm9hcmRJbmRleFxuICAgKiBAcmV0dXJucyB7W1NoaXBdfVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0UmFuZG9tRmxlZXQoYm9hcmRJbmRleCkge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2YWxpZCBzaGlwIHRoYXQgZml0cyBib2FyZCBhbmQgZG9lcyBub3QgdG91Y2ggb3RoZXIgc2hpcHMuXG4gICAgICogQHBhcmFtIHtpbnR9IHNoaXBTaXplIEludGVnZXIgMSAtIDQgaW5jbHVzaXZlXG4gICAgICogQHBhcmFtIHtpbnR9IGJvYXJkSW5kZXggSW50ZWdlciAwIC0gMSBpbmNsdXNpdmVcbiAgICAgKiBAcmV0dXJucyB7U2hpcH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21TaGlwKHNoaXBTaXplLCBib2FyZE51bSwgZnJlZVBvc2l0aW9ucywgc2hpcHNQb3NpdGlvbnMpIHtcbiAgICAgIGxldCB2YWxpZFNoaXAgPSBmYWxzZTtcbiAgICAgIGxldCBzaGlwO1xuICAgICAgY29uc3Qgc2l6ZSA9IGZyZWVQb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKCF2YWxpZFNoaXApIHtcbiAgICAgICAgY29uc3QgcmFuZG9tT3JpZW50YXRpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41O1xuICAgICAgICBjb25zdCByYW5kb21Qb3MgPSBmcmVlUG9zaXRpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNpemUpXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzaGlwID0gbmV3IFNoaXAoc2hpcFNpemUsIHJhbmRvbU9yaWVudGF0aW9uLCBib2FyZE51bSwgcmFuZG9tUG9zKTtcblxuICAgICAgICAgIC8vIGlzIHRoZXJlIGFueSBzaGlwIGNlbGwgd2hpY2ggaXMgbm90IGZyZWVcbiAgICAgICAgICBjb25zdCBzaGlwQ2VsbHNBdmFpbGFibGUgPSAhc2hpcFxuICAgICAgICAgICAgLmdldENlbGxQb3NpdGlvbnMoKVxuICAgICAgICAgICAgLnNvbWUoKHBvcykgPT4gIWZyZWVQb3NpdGlvbnMuaW5jbHVkZXMocG9zKSk7XG5cbiAgICAgICAgICAvLyBBIHNoaXAgaXMgaXNvbGF0ZWQgaWZmIGFsbCBzdXJyb3VuZGluZyBjZWxscyBhcmUgbm90IHNoaXAgY2VsbHNcbiAgICAgICAgICBjb25zdCBzaGlwSXNJc29sYXRlZCA9ICFzaGlwXG4gICAgICAgICAgICAuZ2V0Q2VsbFBvc2l0aW9ucygpXG4gICAgICAgICAgICAuc29tZSgocG9zKSA9PlxuICAgICAgICAgICAgICBnZXRUb3VjaGluZ0NlbGxzKHBvcykuc29tZSgoeCkgPT4gc2hpcHNQb3NpdGlvbnMuaW5jbHVkZXMoeCkpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgdmFsaWRTaGlwID0gc2hpcENlbGxzQXZhaWxhYmxlICYmIHNoaXBJc0lzb2xhdGVkO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB2YWxpZFNoaXAgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNoaXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcG9zaXRpb25zIG9mIGFsbCBjZWxscyBzdXJyb3VuZGluZyBjdXJyZW50IGNlbGwuXG4gICAgICogQHBhcmFtIHtpbnR9IHBvcyBjZWxsIHBvc2l0aW9uIDAgLSA5OVxuICAgICAqIEByZXR1cm5zIHtbaW50XX0gYXJyYXkgb2YgcG9zaXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VG91Y2hpbmdDZWxscyhwb3MpIHtcbiAgICAgIGlmIChwb3MgPCAwIHx8IHBvcyA+PSBCb2FyZC5CT0FSRF9TSVpFICogQm9hcmQuQk9BUkRfU0laRSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY2VsbCBwb3NpdGlvbjogJHtwb3N9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBjZWxscyA9IFtdO1xuICAgICAgY29uc3Qgcm93ID0gcGFyc2VJbnQocG9zIC8gQm9hcmQuQk9BUkRfU0laRSwgMTApO1xuICAgICAgY29uc3QgY29sID0gcG9zICUgQm9hcmQuQk9BUkRfU0laRTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gW1xuICAgICAgICBbLTEsIC0xLCAtMSwgMCwgMSwgMSwgMSwgMF0sXG4gICAgICAgIFstMSwgMCwgMSwgMSwgMSwgMCwgLTEsIC0xXSxcbiAgICAgIF07XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zbGF0aW9uWzBdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSByb3cgKyB0cmFuc2xhdGlvblswXVtpXTtcbiAgICAgICAgY29uc3QgYyA9IGNvbCArIHRyYW5zbGF0aW9uWzFdW2ldO1xuICAgICAgICBpZiAociA+PSAwICYmIGMgPj0gMCAmJiByIDwgQm9hcmQuQk9BUkRfU0laRSAmJiBjIDwgQm9hcmQuQk9BUkRfU0laRSkge1xuICAgICAgICAgIGNlbGxzLnB1c2gociAqIEJvYXJkLkJPQVJEX1NJWkUgKyBjKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNlbGxzO1xuICAgIH1cbiAgICBjb25zdCBzaGlwU2l6ZXMgPSBbNCwgMywgMywgMiwgMiwgMiwgMSwgMSwgMSwgMV07XG4gICAgbGV0IGZyZWVQb3NpdGlvbnMgPSBBcnJheS5mcm9tKFxuICAgICAgQXJyYXkoQm9hcmQuQk9BUkRfU0laRSAqIEJvYXJkLkJPQVJEX1NJWkUpLmtleXMoKVxuICAgICk7IC8vIEFsbCBwb3NpdGlvbnMgd2hlcmUgc2hpcCBjYW4gYmUgcGxhY2VkIFswLCAxLCAyLCAzLCAuLi4gLCA5OV1cbiAgICBsZXQgc2hpcFBvc2l0aW9ucyA9IFtdO1xuICAgIGNvbnN0IGZsZWV0ID0gW107XG5cbiAgICBzaGlwU2l6ZXMuZm9yRWFjaCgoc2hpcFNpemUpID0+IHtcbiAgICAgIC8vIGRpc3BsYXlCb2FyZChzaGlwUG9zaXRpb25zKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBTb2x2aW5nICR7c2hpcFNpemV9YCk7XG4gICAgICAvLyBnZXQgYSByYW5kb20gdmFsaWQgc2hpcFxuICAgICAgY29uc3Qgc2hpcE9iaiA9IGdldFJhbmRvbVNoaXAoXG4gICAgICAgIHNoaXBTaXplLFxuICAgICAgICBib2FyZEluZGV4LFxuICAgICAgICBmcmVlUG9zaXRpb25zLFxuICAgICAgICBzaGlwUG9zaXRpb25zXG4gICAgICApO1xuICAgICAgLy8gY29uc29sZS5sb2coYFNvbHZlZCAke3NoaXBTaXplfWApO1xuXG4gICAgICBmbGVldC5wdXNoKHNoaXBPYmopO1xuXG4gICAgICBzaGlwUG9zaXRpb25zID0gWy4uLnNoaXBQb3NpdGlvbnMsIC4uLnNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpXTtcblxuICAgICAgLy8gdXBkYXRlIGlzRnJlZSAocmVtb3ZlIHNoaXAgY2VsbCBwb3NpdGlvbnMgYW5kIHN1cnJvdW5kaW5nIGNlbGxzKVxuICAgICAgc2hpcE9iai5nZXRDZWxsUG9zaXRpb25zKCkuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1cnJvdW5kaW5nQ2VsbHMgPSBnZXRUb3VjaGluZ0NlbGxzKHBvcyk7XG4gICAgICAgIGZyZWVQb3NpdGlvbnMgPSBmcmVlUG9zaXRpb25zLmZpbHRlcihcbiAgICAgICAgICAoZWwpID0+IGVsICE9PSBwb3MgJiYgIXN1cnJvdW5kaW5nQ2VsbHMuaW5jbHVkZXMoZWwpXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGZyZWVQb3NpdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmxlZXQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2FtZSB2YWxpZCBTaGlwIGFycmF5IGV2ZXJ5IHRpbWUuXG4gICAqIEBwYXJhbSB7aW50fSBib2FyZEluZGV4XG4gICAqIEByZXR1cm5zIHtbU2hpcF19IGFycmF5IG9mIDEwIGBTaGlwYCBvYmplY3RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXREZWZhdWx0RmxlZXQoYm9hcmRJbmRleCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgU2hpcCg0LCB0cnVlLCBib2FyZEluZGV4LCAwKSxcbiAgICAgIG5ldyBTaGlwKDMsIHRydWUsIGJvYXJkSW5kZXgsIDMpLFxuICAgICAgbmV3IFNoaXAoMywgZmFsc2UsIGJvYXJkSW5kZXgsIDUpLFxuICAgICAgbmV3IFNoaXAoMiwgZmFsc2UsIGJvYXJkSW5kZXgsIDM4KSxcbiAgICAgIG5ldyBTaGlwKDIsIHRydWUsIGJvYXJkSW5kZXgsIDYwKSxcbiAgICAgIG5ldyBTaGlwKDIsIHRydWUsIGJvYXJkSW5kZXgsIDg0KSxcbiAgICAgIG5ldyBTaGlwKDEsIGZhbHNlLCBib2FyZEluZGV4LCA5OSksXG4gICAgICBuZXcgU2hpcCgxLCB0cnVlLCBib2FyZEluZGV4LCAxOSksXG4gICAgICBuZXcgU2hpcCgxLCB0cnVlLCBib2FyZEluZGV4LCA5MCksXG4gICAgICBuZXcgU2hpcCgxLCBmYWxzZSwgYm9hcmRJbmRleCwgNTkpLFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG1hdHJpeCBzaG93aW5nIHNoaXAgcG9zaXRpb25zIG9uIGJvYXJkLlxuICAgKiBAcGFyYW0ge2ludH0gYm9hcmRJbmRleFxuICAgKiBAcmV0dXJucyB7W1tdXX0gMkQgbWF0cml4IG9mIDBzIGFuZCAxc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QmFzaWNCb2FyZChib2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGJvYXJkSW5kZXggPT09IG15Qm9hcmQuaW5kZXhcbiAgICAgID8gbXlCb2FyZC5iYXNpY0JvYXJkXG4gICAgICA6IHJpdmFsQm9hcmQuYmFzaWNCb2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFsbFNoaXBQb3NpdGlvbnMoYm9hcmRJbmRleCkge1xuICAgIHJldHVybiBib2FyZEluZGV4ID09PSBteUJvYXJkLmluZGV4XG4gICAgICA/IG15Qm9hcmQuZ2V0QWxsU2hpcFBvc2l0aW9ucygpXG4gICAgICA6IHJpdmFsQm9hcmQuZ2V0QWxsU2hpcFBvc2l0aW9ucygpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2hpcE9iaihib2FyZEluZGV4LCBwb3MpIHtcbiAgICByZXR1cm4gYm9hcmRJbmRleCA9PT0gbXlCb2FyZC5pbmRleFxuICAgICAgPyBteUJvYXJkLmdldFNoaXBBdChwb3MpXG4gICAgICA6IHJpdmFsQm9hcmQuZ2V0U2hpcEF0KHBvcyk7XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGVTaGlwKHNoaXBDZWxsUG9zLCBib2FyZEluZGV4KSB7XG4gICAgcmV0dXJuIGJvYXJkSW5kZXggPT09IG15Qm9hcmQuaW5kZXhcbiAgICAgID8gbXlCb2FyZC5yb3RhdGVTaGlwKG15Qm9hcmQuZ2V0U2hpcEF0KHNoaXBDZWxsUG9zKSlcbiAgICAgIDogcml2YWxCb2FyZC5yb3RhdGVTaGlwKHJpdmFsQm9hcmQuZ2V0U2hpcEF0KHNoaXBDZWxsUG9zKSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtTaGlwfSBzaGlwT2JqXG4gICAqIEBwYXJhbSB7aW50fSBuZXdIZWFkUG9zXG4gICAqIEBwYXJhbSB7aW50fSBib2FyZEluZGV4XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZnVuY3Rpb24gbW92ZVNoaXAob2xkSGVhZFBvcywgbmV3SGVhZFBvcywgYm9hcmRJbmRleCkge1xuICAgIHJldHVybiBib2FyZEluZGV4ID09PSBteUJvYXJkLmluZGV4XG4gICAgICA/IG15Qm9hcmQubW92ZVNoaXAobXlCb2FyZC5nZXRTaGlwQXQob2xkSGVhZFBvcyksIG5ld0hlYWRQb3MpXG4gICAgICA6IHJpdmFsQm9hcmQubW92ZVNoaXAocml2YWxCb2FyZC5nZXRTaGlwQXQob2xkSGVhZFBvcyksIG5ld0hlYWRQb3MpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRCYXNpY0JvYXJkLFxuICAgIGdldEFsbFNoaXBQb3NpdGlvbnMsXG4gICAgZ2V0U2hpcE9iaixcbiAgICByb3RhdGVTaGlwLFxuICAgIG1vdmVTaGlwLFxuICAgIHN0YXJ0R2FtZSxcbiAgICBzd2FwVHVybixcbiAgICBlbmRHYW1lLFxuICAgIGF0dGFja0JvYXJkLFxuICAgIGNoZWNrV2lubmVyLFxuICAgIGdldFR1cm4sXG4gICAgZ2FtZVN0YXJ0ZWQsXG4gICAgaW5pdGlhbGlzZUJvYXJkcyxcbiAgICBpc1NoaXAsXG4gICAgY29tcHV0ZXJQbGF5LFxuICAgIGdldFJhbmRvbUZsZWV0LFxuICB9O1xufSkoKTtcbmV4cG9ydCBkZWZhdWx0IG1vZGVsO1xuIiwiaW1wb3J0IEJvYXJkIGZyb20gXCIuL2JvYXJkXCI7XG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XG5cbmNvbnN0IHZpZXcgPSAoKCkgPT4ge1xuICBjb25zdCBiYXR0bGVmaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhdHRsZWZpZWxkc1wiKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhbiBIVE1MIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEhUTUwgdHlwZSA6IGRpdiwgbmF2LCB1bCwgLi4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBIVE1MIElEXG4gICAqIEBwYXJhbSB7W3N0cmluZ119IGFycmF5Q2xhc3Nlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdHh0Q29udGVudFxuICAgKiBAcGFyYW0ge1tIVE1MRWxlbWVudF19IGFycmF5Q2hpbGRyZW4gSFRNTCBlbGVtZW50cyB3aGljaCBtdXN0IGJlIGFwcGVuZGVkIHRvIG5ld2x5IGNyZWF0ZWQgZWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IEhUTUwgZWxlbWVudFxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgdHlwZSxcbiAgICBpZCxcbiAgICBhcnJheUNsYXNzZXMsXG4gICAgdHh0Q29udGVudCxcbiAgICBhcnJheUNoaWxkcmVuXG4gICkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuXG4gICAgaWYgKGlkKSBlbGVtZW50LmlkID0gaWQ7XG5cbiAgICBpZiAoYXJyYXlDbGFzc2VzKVxuICAgICAgYXJyYXlDbGFzc2VzLmZvckVhY2goKG15Q2xhc3MpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChteUNsYXNzKSk7XG5cbiAgICBpZiAodHh0Q29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IHR4dENvbnRlbnQ7XG5cbiAgICBpZiAoYXJyYXlDaGlsZHJlbikge1xuICAgICAgYXJyYXlDaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4gZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCkpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgMTB4MTAgZW1wdHkgYm9hcmQgSFRNTCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYm9hcmRJRFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0TmV3Qm9hcmQoYm9hcmRJRCkge1xuICAgIGNvbnN0IG5ld0JvYXJkID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJ0YWJsZVwiLCBib2FyZElELCBbXCJib2FyZFwiXSwgbnVsbCwgbnVsbCk7XG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgQm9hcmQuQk9BUkRfU0laRTsgcm93KyspIHtcbiAgICAgIGNvbnN0IGNlbGxzQXJyYXkgPSBbXTtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IEJvYXJkLkJPQVJEX1NJWkU7IGNvbCsrKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcm93ICogQm9hcmQuQk9BUkRfU0laRSArIGNvbDtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUh0bWxFbGVtZW50KFwidGRcIiwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpbmRleCk7XG4gICAgICAgIGNlbGxzQXJyYXkucHVzaChjZWxsKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvd0VsZW1lbnQgPSBjcmVhdGVIdG1sRWxlbWVudChcInRyXCIsIG51bGwsIG51bGwsIG51bGwsIGNlbGxzQXJyYXkpO1xuICAgICAgbmV3Qm9hcmQuYXBwZW5kQ2hpbGQocm93RWxlbWVudCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdCb2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE15Qm9hcmQoKSB7XG4gICAgcmV0dXJuIGJhdHRsZWZpZWxkcy5xdWVyeVNlbGVjdG9yKFwiI215Qm9hcmRcIik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSaXZhbEJvYXJkKCkge1xuICAgIHJldHVybiBiYXR0bGVmaWVsZHMucXVlcnlTZWxlY3RvcihcIiNyaXZhbEJvYXJkXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGlzZUJvYXJkcygpIHtcbiAgICBjb25zdCBteUJvYXJkID0gZ2V0TmV3Qm9hcmQoXCJteUJvYXJkXCIpO1xuICAgIGNvbnN0IHJpdmFsQm9hcmQgPSBnZXROZXdCb2FyZChcInJpdmFsQm9hcmRcIik7XG4gICAgLy8gISBEbyBub3QgY2hhbmdlIG9yZGVyIG9mIGFwcGVuZGluZzpcbiAgICBiYXR0bGVmaWVsZHMuYXBwZW5kQ2hpbGQobXlCb2FyZCk7XG4gICAgYmF0dGxlZmllbGRzLmFwcGVuZENoaWxkKHJpdmFsQm9hcmQpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlQ2VsbENvbG9yKGNlbGwsIG1pc3NlZCA9IHRydWUpIHtcbiAgICBpZiAobWlzc2VkKSB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJtaXNzZWQtaGl0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJnb29kLWhpdFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2VsbCBhdCBhIGdpdmVuIGBib2FyZEluZGV4YCBhbmQgYGNlbGxJbmRleGBcbiAgICogQHBhcmFtIHtpbnR9IGJvYXJkSW5kZXggYDBgIGZvciBteSBib2FyZCBhbmQgYDFgIGZvciByaXZhbCBib2FyZC5cbiAgICogQHBhcmFtIHtpbnR9IGNlbGxJbmRleCB2YWx1ZXMgYmV0d2VlbiAwLTk5XG4gICAqIEByZXR1cm5zIEhUTUxUYWJsZUNlbGxFbGVtZW50XG4gICAqL1xuICBmdW5jdGlvbiBnZXRCb2FyZENlbGxFbGVtZW50KGJvYXJkSW5kZXgsIGNlbGxJbmRleCkge1xuICAgIC8vIHZhbGlkYXRlIHBhcmFtZXRlcnNcbiAgICBpZiAoIShib2FyZEluZGV4ID09PSAwIHx8IGJvYXJkSW5kZXggPT09IDEpKSB7XG4gICAgICB0aHJvdyBFcnJvcihgSW52YWxpZCBib2FyZCBpbmRleDogJHtib2FyZEluZGV4fWApO1xuICAgIH1cbiAgICBpZiAoIShjZWxsSW5kZXggPj0gMCAmJiBjZWxsSW5kZXggPCBCb2FyZC5CT0FSRF9TSVpFICogQm9hcmQuQk9BUkRfU0laRSkpIHtcbiAgICAgIHRocm93IEVycm9yKGBJbnZhbGlkIGNlbGwgaW5kZXg6ICR7Y2VsbEluZGV4fWApO1xuICAgIH1cbiAgICBjb25zdCBib2FyZHMgPSBiYXR0bGVmaWVsZHMucXVlcnlTZWxlY3RvckFsbChcIi5ib2FyZFwiKTtcbiAgICByZXR1cm4gWy4uLmJvYXJkc1tib2FyZEluZGV4XS5xdWVyeVNlbGVjdG9yQWxsKFwidGRcIildW2NlbGxJbmRleF07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBbGxCb2FyZENlbGxFbGVtZW50cyhib2FyZEluZGV4KSB7XG4gICAgaWYgKGJvYXJkSW5kZXggPT09IDApIHtcbiAgICAgIHJldHVybiBnZXRNeUJvYXJkKCkucXVlcnlTZWxlY3RvckFsbChcInRkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0Uml2YWxCb2FyZCgpLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNoaXBDZWxsRWxlbWVudChib2FyZEluZGV4LCBjZWxsSW5kZXgpIHtcbiAgICBjb25zdCBzaGlwQ2VsbCA9IGdldEJvYXJkQ2VsbEVsZW1lbnQoYm9hcmRJbmRleCwgY2VsbEluZGV4KS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuc2hpcC1jZWxsXCJcbiAgICApO1xuICAgIGlmIChzaGlwQ2VsbCA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzaGlwIGNlbGwgYXQgJHtjZWxsSW5kZXh9YCk7XG4gICAgfVxuICAgIHJldHVybiBzaGlwQ2VsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVTaGlwQ2VsbChib2FyZEluZGV4LCBpbml0aWFsUG9zLCBmaW5hbFBvcykge1xuICAgIGlmIChpbml0aWFsUG9zID09PSBmaW5hbFBvcykgcmV0dXJuO1xuICAgIGNvbnN0IHNoaXBDZWxsID0gZ2V0U2hpcENlbGxFbGVtZW50KGJvYXJkSW5kZXgsIGluaXRpYWxQb3MpO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZ2V0Qm9hcmRDZWxsRWxlbWVudChib2FyZEluZGV4LCBmaW5hbFBvcyk7XG4gICAgY29uc29sZS5sb2coc2hpcENlbGwsIGRlc3RpbmF0aW9uKTtcbiAgICBkZXN0aW5hdGlvbi5hcHBlbmRDaGlsZChzaGlwQ2VsbCk7XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW5HdWVzcygpIHtcbiAgICAvLyBtb3ZlIHRoaXMgZnVuY3Rpb24gdG8gY29udHJvbGxlci5cbiAgICBjb25zdCBjZWxscyA9IGdldFJpdmFsQm9hcmQoKS5xdWVyeVNlbGVjdG9yQWxsKFwidGRcIik7XG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgY2hhbmdlQ2VsbENvbG9yKGUudGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlUGxheUJ1dHRvbkNvbG91cigpIHtcbiAgICBnZXRQbGF5QnV0dG9uKCkuY2xhc3NMaXN0LmFkZChcInN0YXJ0ZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgYSBjZWxsIG9uIGJvYXJkLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBjZWxsIGVsZW1lbnQgb3Igc2hpcCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtpbnR9IDAtOTlcbiAgICovXG4gIGZ1bmN0aW9uIGdldENlbGxJbmRleChlbCkge1xuICAgIHJldHVybiBwYXJzZUludChlbC5jbG9zZXN0KFwidGRcIikuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKSwgMTApO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheUd1ZXNzKCkge1xuICAgIGNvbnN0IHggPSBbLi4uZ2V0TXlCb2FyZCgpLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFwiKV07XG4gICAgeFswXS5jbGFzc0xpc3QuYWRkKFwibWlzc2VkLWhpdFwiKTtcbiAgICB4WzNdLmNsYXNzTGlzdC5hZGQoXCJtaXNzZWQtaGl0XCIpO1xuXG4gICAgeFsxMF0uY2xhc3NMaXN0LmFkZChcImdvb2QtaGl0XCIpO1xuICAgIHhbMjBdLmNsYXNzTGlzdC5hZGQoXCJnb29kLWhpdFwiKTtcbiAgICB4WzMwXS5jbGFzc0xpc3QuYWRkKFwiZ29vZC1oaXRcIik7XG5cbiAgICBjb25zdCByaXZhbENlbGxzID0gZ2V0Uml2YWxCb2FyZCgpLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFwiKTtcbiAgICByaXZhbENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGNoYW5nZUNlbGxDb2xvcihlLnRhcmdldCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBjbGlja2VkQ2VsbCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNsaWNrZWRDZWxsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGlzZVNoaXBzKGJhc2ljQm9hcmQsIGJvYXJkSW5kZXgpIHtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBCb2FyZC5CT0FSRF9TSVpFOyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgQm9hcmQuQk9BUkRfU0laRTsgY29sKyspIHtcbiAgICAgICAgY29uc3QgcG9zID0gcm93ICogQm9hcmQuQk9BUkRfU0laRSArIGNvbDtcbiAgICAgICAgY29uc3QgZWwgPSBnZXRCb2FyZENlbGxFbGVtZW50KGJvYXJkSW5kZXgsIHBvcyk7XG4gICAgICAgIGlmIChiYXNpY0JvYXJkW3Jvd11bY29sXSA9PT0gQm9hcmQuU0hJUF9DRUxMKSB7XG4gICAgICAgICAgY29uc3Qgc2hpcENsYXNzZXMgPVxuICAgICAgICAgICAgYm9hcmRJbmRleCA9PT0gMCA/IFtcInNoaXAtY2VsbFwiXSA6IFtcInNoaXAtY2VsbFwiLCBcImhpZGRlblwiXTtcbiAgICAgICAgICBjb25zdCBzaGlwQ2VsbCA9IGNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBzaGlwQ2xhc3NlcyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBlbC5hcHBlbmRDaGlsZChzaGlwQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNeVNoaXBDZWxscygpIHtcbiAgICByZXR1cm4gZ2V0TXlCb2FyZCgpLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hpcC1jZWxsXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlR2hvc3RTaGlwKGFkZFNoaXAsIGhlYWRQb3MsIHNpemUsIGlzVmVydGljYWwpIHtcbiAgICBsZXQgZ2hvc3RTaGlwO1xuICAgIHRyeSB7XG4gICAgICBnaG9zdFNoaXAgPSBuZXcgU2hpcChzaXplLCBpc1ZlcnRpY2FsLCAwLCBoZWFkUG9zKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2hvc3RTaGlwLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgIGlmIChhZGRTaGlwKSB7XG4gICAgICAgIGdldEJvYXJkQ2VsbEVsZW1lbnQoMCwgcG9zKS5jbGFzc0xpc3QuYWRkKFwiZ2hvc3QtY2VsbFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldEJvYXJkQ2VsbEVsZW1lbnQoMCwgcG9zKS5jbGFzc0xpc3QucmVtb3ZlKFwiZ2hvc3QtY2VsbFwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBsYXlCdXR0b24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheUJ1dHRvblwiKTtcbiAgfVxuICAvKipcbiAgICogRGlzcGxheXMgYSBtZXNzYWdlIGFib3V0IHdpbm5lciB0byB1c2VyLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlXb24gYHRydWVgIGlmIEkgd29uIHRoZSBnYW1lXG4gICAqL1xuICBmdW5jdGlvbiBkaXNwbGF5V2lubmVyKGlXb24pIHtcbiAgICBnZXRQbGF5QnV0dG9uKCkudGV4dENvbnRlbnQgPSBpV29uID8gXCJZb3Ugd29uIVwiIDogXCJZb3UgbG9zdFwiO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheVR1cm4obXlUdXJuKSB7XG4gICAgZ2V0UGxheUJ1dHRvbigpLnRleHRDb250ZW50ID0gbXlUdXJuID8gXCJZb3VyIHR1cm5cIiA6IFwiLi4uXCI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGluaXRpYWxpc2VCb2FyZHMsXG4gICAgY2hhbmdlUGxheUJ1dHRvbkNvbG91cixcbiAgICBpbml0aWFsaXNlU2hpcHMsXG4gICAgZGlzcGxheUd1ZXNzLFxuICAgIGxpc3Rlbkd1ZXNzLFxuICAgIGdldEJvYXJkQ2VsbEVsZW1lbnQsXG4gICAgZ2V0TXlTaGlwQ2VsbHMsXG4gICAgZ2V0U2hpcENlbGxFbGVtZW50LFxuICAgIG1vdmVTaGlwQ2VsbCxcbiAgICBnZXRDZWxsSW5kZXgsXG4gICAgdG9nZ2xlR2hvc3RTaGlwLFxuICAgIGRpc3BsYXlXaW5uZXIsXG4gICAgZGlzcGxheVR1cm4sXG4gICAgZ2V0UGxheUJ1dHRvbixcbiAgICBnZXRBbGxCb2FyZENlbGxFbGVtZW50cyxcbiAgICBjaGFuZ2VDZWxsQ29sb3IsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCB2aWV3O1xuIiwiaW1wb3J0IEJvYXJkIGZyb20gXCIuL2JvYXJkXCI7XG5pbXBvcnQgbW9kZWwgZnJvbSBcIi4vbW9kZWxcIjtcbmltcG9ydCB2aWV3IGZyb20gXCIuL3ZpZXdcIjtcblxuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gIC8vICEgT3JkZXIgb2YgaW5pdGlhbGlzYXRpb24gaXMgaW1wb3J0YW50IGhlcmVcbiAgbW9kZWwuaW5pdGlhbGlzZUJvYXJkcygpO1xuICB2aWV3LmluaXRpYWxpc2VCb2FyZHMoKTtcbiAgdmlldy5pbml0aWFsaXNlU2hpcHMoXG4gICAgbW9kZWwuZ2V0QmFzaWNCb2FyZChCb2FyZC5NWV9CT0FSRF9JTkRFWCksXG4gICAgQm9hcmQuTVlfQk9BUkRfSU5ERVhcbiAgKTtcbiAgdmlldy5pbml0aWFsaXNlU2hpcHMoXG4gICAgbW9kZWwuZ2V0QmFzaWNCb2FyZChCb2FyZC5SSVZBTF9CT0FSRF9JTkRFWCksXG4gICAgQm9hcmQuUklWQUxfQk9BUkRfSU5ERVhcbiAgKTtcbiAgY29uc3QgbXlTaGlwQ2VsbHMgPSB2aWV3LmdldE15U2hpcENlbGxzKCk7XG4gIGNvbnNvbGUubG9nKFwiSW5pdGlhbCBib2FyZFwiLCBtb2RlbC5nZXRCYXNpY0JvYXJkKEJvYXJkLk1ZX0JPQVJEX0lOREVYKSk7XG5cbiAgZnVuY3Rpb24gcm90YXRlU2hpcChlKSB7XG4gICAgLy8gcHJldmVudCB1c2VyIGZyb20gY2hhbmdpbmcgc2hpcCBjb25maWd1cmF0aW9uIHdoZW4gZ2FtZSBpcyBvbmdvaW5nXG4gICAgaWYgKG1vZGVsLmdhbWVTdGFydGVkKCkpIHJldHVybjtcbiAgICAvLyBnZXQgdGhlIGluZGV4IG9mIHRoZSBzaGlwIGNlbGxcbiAgICBjb25zdCBzaGlwQ2VsbFBvcyA9IHZpZXcuZ2V0Q2VsbEluZGV4KGUudGFyZ2V0KTtcbiAgICBjb25zb2xlLmxvZyhcIkN1cnJlbnQgYm9hcmQ6IFwiLCBtb2RlbC5nZXRCYXNpY0JvYXJkKEJvYXJkLk1ZX0JPQVJEX0lOREVYKSk7XG5cbiAgICBjb25zdCBzaGlwT2JqID0gbW9kZWwuZ2V0U2hpcE9iaihCb2FyZC5NWV9CT0FSRF9JTkRFWCwgc2hpcENlbGxQb3MpO1xuICAgIGNvbnN0IGludGlhbENvb3JkcyA9IHNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpO1xuXG4gICAgLy8gcm90YXRlIHNoaXAgaW4gYmFzaWMgYm9hcmRcbiAgICBjb25zdCBjaGFuZ2VPY2N1cnJlZCA9IG1vZGVsLnJvdGF0ZVNoaXAoc2hpcENlbGxQb3MsIEJvYXJkLk1ZX0JPQVJEX0lOREVYKTtcblxuICAgIGlmIChjaGFuZ2VPY2N1cnJlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJOZXcgYm9hcmQ6IFwiLCBtb2RlbC5nZXRCYXNpY0JvYXJkKEJvYXJkLk1ZX0JPQVJEX0lOREVYKSk7XG5cbiAgICAgIC8vIHJlbmRlciBjaGFuZ2VzIHZpc3VhbGx5XG4gICAgICBjb25zdCBmaW5hbENvb3JkcyA9IHNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaW5hbENvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2aWV3Lm1vdmVTaGlwQ2VsbChcbiAgICAgICAgICBCb2FyZC5NWV9CT0FSRF9JTkRFWCxcbiAgICAgICAgICBpbnRpYWxDb29yZHNbaV0sXG4gICAgICAgICAgZmluYWxDb29yZHNbaV1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZG91YmxlIGNsaWNrIHRvIHJvdGF0ZSBzaGlwc1xuICBteVNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgcm90YXRlU2hpcCk7XG4gIH0pO1xuXG4gIChmdW5jdGlvbiBhZGREcmFnQW5kRHJvcCgpIHtcbiAgICAvLyBpbXBsZW1lbnQgZHJhZyBhbmQgZHJvcFxuICAgIGxldCBkcmFnZ2VkU2hpcE9iaiA9IG51bGw7IC8vIHNoaXAgb2JqIG9mIHNoaXAgY3VycmVudGx5IGJlaW5nIGRyYWdnZWRcbiAgICAvLyBwcmV2aW91cyBib2FyZCBjZWxsIG9uIHdoaWNoIHVzZXIgaG92ZXJlZCBvbiB3aGlsZSBkcmFnZ2luZ1xuICAgIGxldCBwcmV2aW91c0JvYXJkQ2VsbEluZGV4ID0gLTE7XG5cbiAgICBteVNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKCkgPT4ge1xuICAgICAgICAvLyAhIHByZXZlbnQgdXNlciBmcm9tIGNoYW5naW5nIHNoaXAgY29uZmlndXJhdGlvbiB3aGVuIGdhbWUgaXMgb25nb2luZ1xuICAgICAgICBpZiAobW9kZWwuZ2FtZVN0YXJ0ZWQoKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIGdldCB0aGUgaW5kZXggb2YgdGhlIHNoaXAgY2VsbFxuICAgICAgICBjb25zdCBzaGlwQ2VsbFBvcyA9IHZpZXcuZ2V0Q2VsbEluZGV4KGNlbGwpO1xuICAgICAgICBkcmFnZ2VkU2hpcE9iaiA9IG1vZGVsLmdldFNoaXBPYmooQm9hcmQuTVlfQk9BUkRfSU5ERVgsIHNoaXBDZWxsUG9zKTtcblxuICAgICAgICAvLyBjaGFuZ2UgY29sb3Igb2YgZHJhZ2dlZCBzaGlwXG4gICAgICAgIGRyYWdnZWRTaGlwT2JqLmdldENlbGxQb3NpdGlvbnMoKS5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICB2aWV3XG4gICAgICAgICAgICAuZ2V0U2hpcENlbGxFbGVtZW50KEJvYXJkLk1ZX0JPQVJEX0lOREVYLCBwb3MpXG4gICAgICAgICAgICAuY2xhc3NMaXN0LmFkZChcImRyYWdnaW5nXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIlNoaXAgY3VycmVudGx5IGJlaW5nIGRyYWdnZWRcIiwgZHJhZ2dlZFNoaXBPYmopO1xuICAgICAgICBjb25zb2xlLmxvZyhcImRyYWdzdGFydFwiLCBjZWxsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gd2hlbiBkcmFnIGVuZHNcbiAgICBteVNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsICgpID0+IHtcbiAgICAgICAgLy8gISBwcmV2ZW50IHVzZXIgZnJvbSBjaGFuZ2luZyBzaGlwIGNvbmZpZ3VyYXRpb24gd2hlbiBnYW1lIGlzIG9uZ29pbmdcbiAgICAgICAgaWYgKG1vZGVsLmdhbWVTdGFydGVkKCkpIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2coXCJzdG9wcGVkIGRyYWdnaW5nXCIsIGNlbGwpO1xuXG4gICAgICAgIC8vIHJlc2V0IHRyYW5zcGFyZW5jeSBvZiBkcmFnZ2VkIHNoaXBcbiAgICAgICAgZHJhZ2dlZFNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpLmZvckVhY2goKHBvcykgPT4ge1xuICAgICAgICAgIHZpZXdcbiAgICAgICAgICAgIC5nZXRTaGlwQ2VsbEVsZW1lbnQoQm9hcmQuTVlfQk9BUkRfSU5ERVgsIHBvcylcbiAgICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ2dpbmdcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZpZXcudG9nZ2xlR2hvc3RTaGlwKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHByZXZpb3VzQm9hcmRDZWxsSW5kZXgsXG4gICAgICAgICAgZHJhZ2dlZFNoaXBPYmouc2l6ZSxcbiAgICAgICAgICBkcmFnZ2VkU2hpcE9iai5pc1ZlcnRpY2FsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJiYXNpYyBib2FyZCBiZWZvcmUgY2hhbmdlIGluIHNoaXAgcG9zXCIsXG4gICAgICAgICAgbW9kZWwuZ2V0QmFzaWNCb2FyZChCb2FyZC5NWV9CT0FSRF9JTkRFWClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBnZXQgbmV3IHNoaXAgcG9zaXRpb25cbiAgICAgICAgY29uc29sZS5sb2coXCJuZXcgcG9zaXRpb24gb2Ygc2hpcFwiLCBwcmV2aW91c0JvYXJkQ2VsbEluZGV4KTtcbiAgICAgICAgY29uc3QgaW50aWFsQ29vcmRzID0gZHJhZ2dlZFNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpO1xuICAgICAgICAvLyB0cnkgdG8gbW92ZSBzaGlwXG4gICAgICAgIGNvbnN0IGJvYXJkQ2hhbmdlZCA9IG1vZGVsLm1vdmVTaGlwKFxuICAgICAgICAgIGRyYWdnZWRTaGlwT2JqLmhlYWRQb3MsXG4gICAgICAgICAgcHJldmlvdXNCb2FyZENlbGxJbmRleCxcbiAgICAgICAgICBCb2FyZC5NWV9CT0FSRF9JTkRFWFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChib2FyZENoYW5nZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIFwiYmFzaWMgYm9hcmQgYWZ0ZXIgY2hhbmdlIGluIHNoaXAgcG9zXCIsXG4gICAgICAgICAgICBtb2RlbC5nZXRCYXNpY0JvYXJkKDApXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyByZW5kZXIgY2hhbmdlcyB0byBib2FyZFxuICAgICAgICAgIGNvbnN0IGZpbmFsQ29vcmRzID0gZHJhZ2dlZFNoaXBPYmouZ2V0Q2VsbFBvc2l0aW9ucygpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmluYWxDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcubW92ZVNoaXBDZWxsKFxuICAgICAgICAgICAgICBCb2FyZC5NWV9CT0FSRF9JTkRFWCxcbiAgICAgICAgICAgICAgaW50aWFsQ29vcmRzW2ldLFxuICAgICAgICAgICAgICBmaW5hbENvb3Jkc1tpXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coXCJSZW5kZXJlZCBuZXcgc2hpcCBvbiBib2FyZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBkcmFnZ2VkU2hpcE9iaiA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IHBvcyA9IDA7IHBvcyA8IEJvYXJkLkJPQVJEX1NJWkUgKiBCb2FyZC5CT0FSRF9TSVpFOyBwb3MrKykge1xuICAgICAgY29uc3QgY2VsbCA9IHZpZXcuZ2V0Qm9hcmRDZWxsRWxlbWVudChCb2FyZC5NWV9CT0FSRF9JTkRFWCwgcG9zKTtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsICgpID0+IHtcbiAgICAgICAgLy8gISBwcmV2ZW50IHVzZXIgZnJvbSBjaGFuZ2luZyBzaGlwIGNvbmZpZ3VyYXRpb24gd2hlbiBnYW1lIGlzIG9uZ29pbmdcbiAgICAgICAgaWYgKG1vZGVsLmdhbWVTdGFydGVkKCkpIHJldHVybjtcblxuICAgICAgICBpZiAoZHJhZ2dlZFNoaXBPYmogPT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEcmFnZ2VkIHNoaXAgb2JqZWN0IGNhbm5vdCBiZSBudWxsIGF0IHRoaXMgcG9pbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgcHJldmlvdXMgZ2hvc3Qgc2hpcCBmcm9tIGJvYXJkXG4gICAgICAgIGlmIChwcmV2aW91c0JvYXJkQ2VsbEluZGV4ID49IDAgJiYgcHJldmlvdXNCb2FyZENlbGxJbmRleCAhPT0gcG9zKSB7XG4gICAgICAgICAgdmlldy50b2dnbGVHaG9zdFNoaXAoXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHByZXZpb3VzQm9hcmRDZWxsSW5kZXgsXG4gICAgICAgICAgICBkcmFnZ2VkU2hpcE9iai5zaXplLFxuICAgICAgICAgICAgZHJhZ2dlZFNoaXBPYmouaXNWZXJ0aWNhbFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgbmV3IGdob3N0IHNoaXBcbiAgICAgICAgdmlldy50b2dnbGVHaG9zdFNoaXAoXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBwb3MsXG4gICAgICAgICAgZHJhZ2dlZFNoaXBPYmouc2l6ZSxcbiAgICAgICAgICBkcmFnZ2VkU2hpcE9iai5pc1ZlcnRpY2FsXG4gICAgICAgICk7XG4gICAgICAgIHByZXZpb3VzQm9hcmRDZWxsSW5kZXggPSBwb3M7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pKCk7XG5cbiAgZnVuY3Rpb24gcGxheUNvbXB1dGVyVHVybigpIHtcbiAgICBpZiAobW9kZWwuZ2V0VHVybigpKSByZXR1cm47XG4gICAgY29uc3QgbW92ZSA9IG1vZGVsLmNvbXB1dGVyUGxheSgpO1xuXG4gICAgLy8gZGlzcGxheSBtb3ZlIG9mIGNvbXB1dGVyXG4gICAgdmlldy5jaGFuZ2VDZWxsQ29sb3IoXG4gICAgICB2aWV3LmdldEJvYXJkQ2VsbEVsZW1lbnQoQm9hcmQuTVlfQk9BUkRfSU5ERVgsIG1vdmUpLFxuICAgICAgIW1vZGVsLmlzU2hpcChCb2FyZC5NWV9CT0FSRF9JTkRFWCwgbW92ZSlcbiAgICApO1xuXG4gICAgaWYgKG1vZGVsLmNoZWNrV2lubmVyKCkpIHtcbiAgICAgIGhhbmRsZUVuZEdhbWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29tcHV0ZXIncyB0dXJuIHRvIHBsYXlcbiAgICAgIG1vZGVsLnN3YXBUdXJuKCk7XG4gICAgICB2aWV3LmRpc3BsYXlUdXJuKG1vZGVsLmdldFR1cm4oKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRW5kR2FtZSgpIHtcbiAgICAvLyB3aW5uZXIgZm91bmRcbiAgICBjb25zb2xlLmxvZyhcImdhbWUgZW5kZWRcIik7XG4gICAgdmlldy5kaXNwbGF5V2lubmVyKG1vZGVsLmdldFR1cm4oKSk7XG5cbiAgICAvLyBzdG9wIGxpc3RlbmluZyBmb3IgdXNlciBpbnB1dHNcbiAgICB2aWV3LmdldEFsbEJvYXJkQ2VsbEVsZW1lbnRzKCkuZm9yRWFjaCgodGhpc2NlbGwpID0+IHtcbiAgICAgIHRoaXNjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwbGF5TXlUdXJuKTtcbiAgICB9KTtcblxuICAgIC8vIGVuZCBnYW1lXG4gICAgbW9kZWwuZW5kR2FtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheU15VHVybihlKSB7XG4gICAgLy8gY2hlY2sgaWYgaXQgaXMgYWN0dWFsbHkgbXkgdHVyblxuICAgIGlmICghbW9kZWwuZ2V0VHVybigpKSByZXR1cm47XG5cbiAgICBjb25zdCBjZWxsSW5kZXggPSB2aWV3LmdldENlbGxJbmRleChlLnRhcmdldCk7XG4gICAgY29uc3QgYm9hcmRDZWxsID0gdmlldy5nZXRCb2FyZENlbGxFbGVtZW50KFxuICAgICAgQm9hcmQuUklWQUxfQk9BUkRfSU5ERVgsXG4gICAgICBjZWxsSW5kZXhcbiAgICApO1xuXG4gICAgLy8gY2hlY2sgaWYgaSBtYWRlIGEgdmFsaWQgbW92ZVxuICAgIGNvbnN0IHZhbGlkTW92ZSA9IG1vZGVsLmF0dGFja0JvYXJkKGNlbGxJbmRleCk7XG4gICAgaWYgKCF2YWxpZE1vdmUpIHJldHVybjtcblxuICAgIHZpZXcuY2hhbmdlQ2VsbENvbG9yKFxuICAgICAgYm9hcmRDZWxsLFxuICAgICAgIW1vZGVsLmlzU2hpcChCb2FyZC5SSVZBTF9CT0FSRF9JTkRFWCwgY2VsbEluZGV4KVxuICAgICk7XG5cbiAgICBpZiAobW9kZWwuY2hlY2tXaW5uZXIoKSkge1xuICAgICAgaGFuZGxlRW5kR2FtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wdXRlcidzIHR1cm4gdG8gcGxheVxuICAgICAgbW9kZWwuc3dhcFR1cm4oKTtcbiAgICAgIHZpZXcuZGlzcGxheVR1cm4obW9kZWwuZ2V0VHVybigpKTtcbiAgICAgIHBsYXlDb21wdXRlclR1cm4oKTtcbiAgICB9XG4gIH1cblxuICB2aWV3LmdldFBsYXlCdXR0b24oKS5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwiY2xpY2tcIixcbiAgICAoKSA9PiB7XG4gICAgICBtb2RlbC5zdGFydEdhbWUoKTtcbiAgICAgIHZpZXcuZGlzcGxheVR1cm4obW9kZWwuZ2V0VHVybigpKTtcbiAgICAgIHZpZXcuY2hhbmdlUGxheUJ1dHRvbkNvbG91cigpO1xuXG4gICAgICB2aWV3LmdldEFsbEJvYXJkQ2VsbEVsZW1lbnRzKCkuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwbGF5TXlUdXJuKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgeyBvbmNlOiB0cnVlIH1cbiAgKTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xsZXI7XG4iXSwibmFtZXMiOlsiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJwdXNoIiwibW9kdWxlIiwiaWQiLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIlVSTCIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18iLCJleHBvcnRzIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsImxpc3QiLCJ0b1N0cmluZyIsInRoaXMiLCJtYXAiLCJpdGVtIiwiY29udGVudCIsIm5lZWRMYXllciIsImNvbmNhdCIsImxlbmd0aCIsImpvaW4iLCJpIiwibW9kdWxlcyIsIm1lZGlhIiwiZGVkdXBlIiwic3VwcG9ydHMiLCJsYXllciIsInVuZGVmaW5lZCIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJrIiwiX2siLCJ1cmwiLCJvcHRpb25zIiwiU3RyaW5nIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ0ZXN0Iiwic2xpY2UiLCJoYXNoIiwibmVlZFF1b3RlcyIsInJlcGxhY2UiLCJjc3NNYXBwaW5nIiwiYnRvYSIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290Iiwic3R5bGVzSW5ET00iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJiYXNlIiwiY291bnQiLCJpbmRleEJ5SWRlbnRpZmllciIsIm9iaiIsImNzcyIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkRWxlbWVudFN0eWxlIiwiYnlJbmRleCIsInNwbGljZSIsImFwaSIsImRvbUFQSSIsInVwZGF0ZSIsIm5ld09iaiIsInJlbW92ZSIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJpbmRleCIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4IiwibWVtbyIsImluc2VydCIsInN0eWxlIiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aW5kb3ciLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwiZ2V0VGFyZ2V0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJzdHlsZUVsZW1lbnQiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlVGFnVHJhbnNmb3JtIiwiYXBwbHkiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImZpcnN0Q2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibiIsImdldHRlciIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwIiwiYiIsImJhc2VVUkkiLCJzZWxmIiwiaHJlZiIsIm5jIiwiQm9hcmQiLCJjb25zdHJ1Y3RvciIsImJvYXJkSW5kZXgiLCJfYm9hcmQiLCJBcnJheSIsIkJPQVJEX1NJWkUiLCJmaWxsIiwiRU1QVFlfQ0VMTCIsIk1ZX0JPQVJEX0lOREVYIiwiUklWQUxfQk9BUkRfSU5ERVgiLCJTSElQX0NFTEwiLCJiYXNpY0JvYXJkIiwic2V0Q2VsbFZhbHVlIiwiY2VsbFBvcyIsImNlbGxWYWx1ZSIsInJvdyIsInBhcnNlSW50IiwiY29sIiwiZ2V0Q2VsbFZhbHVlIiwibG9hZFNoaXBzIiwic2hpcEFycmF5IiwibmV3Qm9hcmQiLCJmb3JFYWNoIiwic2hpcCIsImdldENlbGxQb3NpdGlvbnMiLCJ2YWxpZGF0ZSIsIl9zaGlwQXJyYXkiLCJyZXNldEJvYXJkIiwiZ2V0U2hpcEF0IiwicG9zIiwiaW5jbHVkZXMiLCJtb3ZlU2hpcCIsInNoaXBPYmoiLCJuZXdIZWFkUG9zIiwiaGVhZFBvcyIsImhlYWRSb3ciLCJoZWFkQ29sIiwib3JpZ2luYWxQb3MiLCJmaXRzQm9hcmQiLCJpc1ZlcnRpY2FsIiwic2l6ZSIsIm1vdmVUbyIsInJvdGF0ZVNoaXAiLCJyb3RhdGUiLCJzdGF0aWMiLCJib2FyZCIsImlzU3VibWFyaW5lIiwicnIiLCJjYyIsIm5ld1JvdyIsIm5ld0NvbCIsImlsbGVnYWxDZWxsIiwiciIsImMiLCJzIiwiaGNlbGxzIiwidmNlbGxzIiwiaiIsImdldEFsbFNoaXBQb3NpdGlvbnMiLCJBbGxTaGlwUG9zaXRpb25zIiwicG9zaXRpb24iLCJfcG9zaXRpb24iLCJfaGl0IiwiaGl0IiwiaGl0dGVkIiwidmVydGljYWxseU9yaWVudGVkIiwiX3NpemUiLCJfYm9hcmRJbmRleCIsIl9oZWFkUG9zIiwiX3ZlcnRpY2FsIiwiX2xpZmUiLCJ2ZXJ0aWNhbE9yaWVudGF0aW9uIiwibmV3UG9zIiwiY2VsbHNBcnJheSIsIl9jZWxsc0FycmF5IiwiY2VsbCIsIlNoaXBDZWxsIiwicm90YXRhYmxlIiwiY3VycmVudENlbGwiLCJhdHRhY2siLCJNYXRoIiwibWF4Iiwic3VuayIsImVsIiwiZ2FtZU9uZ29pbmciLCJteVR1cm4iLCJteUJvYXJkIiwicml2YWxCb2FyZCIsIm15R3Vlc3NlcyIsInJpdmFsR3Vlc3NlcyIsImdldFR1cm4iLCJhdHRhY2tCb2FyZCIsImdldFJhbmRvbUZsZWV0IiwiZ2V0VG91Y2hpbmdDZWxscyIsImNlbGxzIiwidHJhbnNsYXRpb24iLCJmcmVlUG9zaXRpb25zIiwiZnJvbSIsImtleXMiLCJzaGlwUG9zaXRpb25zIiwiZmxlZXQiLCJzaGlwU2l6ZSIsImJvYXJkTnVtIiwic2hpcHNQb3NpdGlvbnMiLCJ2YWxpZFNoaXAiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbSIsInJhbmRvbVBvcyIsImZsb29yIiwiU2hpcCIsInNoaXBDZWxsc0F2YWlsYWJsZSIsInNvbWUiLCJzaGlwSXNJc29sYXRlZCIsIngiLCJlcnIiLCJnZXRSYW5kb21TaGlwIiwic3Vycm91bmRpbmdDZWxscyIsImZpbHRlciIsImdldEJhc2ljQm9hcmQiLCJnZXRTaGlwT2JqIiwic2hpcENlbGxQb3MiLCJvbGRIZWFkUG9zIiwic3RhcnRHYW1lIiwic3dhcFR1cm4iLCJlbmRHYW1lIiwiY2hlY2tXaW5uZXIiLCJpV29uIiwicldvbiIsImdhbWVTdGFydGVkIiwiaW5pdGlhbGlzZUJvYXJkcyIsImlzU2hpcCIsImNvbXB1dGVyUGxheSIsInJhbmRvbU1vdmUiLCJiYXR0bGVmaWVsZHMiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUh0bWxFbGVtZW50IiwidHlwZSIsImFycmF5Q2xhc3NlcyIsInR4dENvbnRlbnQiLCJhcnJheUNoaWxkcmVuIiwibXlDbGFzcyIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiY2hpbGQiLCJnZXROZXdCb2FyZCIsImJvYXJkSUQiLCJyb3dFbGVtZW50IiwiZ2V0TXlCb2FyZCIsImdldFJpdmFsQm9hcmQiLCJjaGFuZ2VDZWxsQ29sb3IiLCJtaXNzZWQiLCJnZXRCb2FyZENlbGxFbGVtZW50IiwiY2VsbEluZGV4IiwicXVlcnlTZWxlY3RvckFsbCIsImdldFNoaXBDZWxsRWxlbWVudCIsInNoaXBDZWxsIiwiZ2V0UGxheUJ1dHRvbiIsImNoYW5nZVBsYXlCdXR0b25Db2xvdXIiLCJpbml0aWFsaXNlU2hpcHMiLCJkaXNwbGF5R3Vlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0QXR0cmlidXRlIiwibGlzdGVuR3Vlc3MiLCJnZXRNeVNoaXBDZWxscyIsIm1vdmVTaGlwQ2VsbCIsImluaXRpYWxQb3MiLCJmaW5hbFBvcyIsImRlc3RpbmF0aW9uIiwiZ2V0Q2VsbEluZGV4IiwiY2xvc2VzdCIsInRvZ2dsZUdob3N0U2hpcCIsImFkZFNoaXAiLCJnaG9zdFNoaXAiLCJkaXNwbGF5V2lubmVyIiwiZGlzcGxheVR1cm4iLCJnZXRBbGxCb2FyZENlbGxFbGVtZW50cyIsIm1vZGVsIiwidmlldyIsIm15U2hpcENlbGxzIiwiaW50aWFsQ29vcmRzIiwiZmluYWxDb29yZHMiLCJoYW5kbGVFbmRHYW1lIiwidGhpc2NlbGwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGxheU15VHVybiIsImJvYXJkQ2VsbCIsIm1vdmUiLCJwbGF5Q29tcHV0ZXJUdXJuIiwiZHJhZ2dlZFNoaXBPYmoiLCJwcmV2aW91c0JvYXJkQ2VsbEluZGV4Iiwib25jZSJdLCJzb3VyY2VSb290IjoiIn0=